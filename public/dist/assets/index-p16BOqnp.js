const __vite__fileDeps=["assets/pageSignIn-B-PYLplq-KiaYOeAk.js","assets/putPreloader-BTYVD0HY-Cj27QpTZ.js","assets/page-VE9OcG0U-aQMl6CMd.js","assets/countryInputField-Dd2coeyi-CrWpF_Pz.js","assets/button-BD6I5F21-BCIxP22E.js","assets/wrapEmojiText-DJXpRYaz-DsSuZO2C.js","assets/scrollable-DoUmbSw--CLoL6L-W.js","assets/pageSignQR-DljwMMf8-Cr_aBgz1.js","assets/textToSvgURL-Cnw_Q8Rw-CS9KuXZv.js","assets/pageAuthCode-BYy_YHRR-CJe_iUCX.js","assets/codeInputField-DJ7B9Vyw-g-D0bfJF.js","assets/pagePassword-BBck6_oH-C0f6p0tu.js","assets/htmlToSpan-CWT7jaQY-DLinxisR.js","assets/loginPage-fFfFEVsO-BAL91Mrr.js","assets/pageSignUp-CKGI2k20-JRNSNSTL.js","assets/avatar-BygOGLJ2-VrvUKNFE.js","assets/pageSignImport-Br1RvrN4-BnemDTql.js","assets/pageIm-B4GzUrmM-D9QjBKom.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();const Fr="modulepreload",yr=function(t){return"/"+t},Cs={},Y=function(e,s,n){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),i=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.all(s.map(a=>{if(a=yr(a),a in Cs)return;Cs[a]=!0;const c=a.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${l}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":Fr,c||(u.as="script",u.crossOrigin=""),u.href=a,i&&u.setAttribute("nonce",i),document.head.appendChild(u),c)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})},br=["./pageSignIn-B-PYLplq.js","./putPreloader-BTYVD0HY.js","./page-VE9OcG0U.js","./countryInputField-Dd2coeyi.js","./button-BD6I5F21.js","./wrapEmojiText-DJXpRYaz.js","./scrollable-DoUmbSw-.js","./pageSignQR-DljwMMf8.js","./textToSvgURL-Cnw_Q8Rw.js","./pageAuthCode-BYy_YHRR.js","./codeInputField-DJ7B9Vyw.js","./pagePassword-BBck6_oH.js","./htmlToSpan-CWT7jaQY.js","./loginPage-fFfFEVsO.js","./pageSignUp-CKGI2k20.js","./avatar-BygOGLJ2.js","./pageSignImport-Br1RvrN4.js","./pageIm-B4GzUrmM.js"],me=t=>t.map(e=>br[e]);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();const wr="modulepreload",Er=function(t,e){return new URL(t,e).href},ks={},z=function(t,e,s){let n=Promise.resolve();if(e&&e.length>0){const r=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),i=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.all(e.map(a=>{if(a=Er(a,s),a in ks)return;ks[a]=!0;const c=a.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(s)for(let h=r.length-1;h>=0;h--){const d=r[h];if(d.href===a&&(!c||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":wr,c||(u.as="script",u.crossOrigin=""),u.href=a,i&&u.setAttribute("nonce",i),document.head.appendChild(u),c)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${a}`)))})}))}return n.then(()=>t()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})},Ss=["web.telegram.org","webk.telegram.org"],Ba="pattern",Ps=Math.min(4,navigator.hardwareConcurrency??4),j={id:1025907,hash:"452b0359b988148995f22ff0f4229750",version:"2.1.0",versionFull:"2.1.0 (520)",build:520,langPackVersion:"5.4.5",langPack:"webk",langPackCode:"en",domains:Ss,baseDcId:2,isMainDomain:Ss.includes(location.hostname),suffix:"K",threads:Ps,cryptoWorkers:Ps};j.isMainDomain&&(j.id=2496,j.hash="8da85b0d5bfe62527e5b244c209159c3");function sn(){var t;return(t=document.activeElement)!=null&&t.blur?(document.activeElement.blur(),!0):!1}function Vt(t){if(t||(t=window.event),t){t=t.originalEvent||t;try{t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1,t.cancelBubble=!0}catch{}}return!1}const pe="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,ls=typeof window<"u"?window:self,Be=navigator?navigator.userAgent:null,Ht=navigator.userAgent.search(/OS X|iPhone|iPad|iOS/i)!==-1,nn=navigator.userAgent.toLowerCase().indexOf("android")!==-1,rn=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),on=(()=>{try{return+navigator.userAgent.match(/Chrom(?:e|ium)\/(.+?)(?:\s|\.)/)[1]}catch{}})(),Pe=(/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!ls.MSStream,Z="safari"in ls||!!(Be&&(/\b(iPad|iPhone|iPod)\b/.test(Be)||Be.match("Safari")&&!Be.match("Chrome"))),_e=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,He=Z&&Pe,ie=(navigator.maxTouchPoints===void 0||navigator.maxTouchPoints>0)&&navigator.userAgent.search(/iOS|iPhone OS|Android|BlackBerry|BB10|Series ?[64]0|J2ME|MIDP|opera mini|opera mobi|mobi.+Gecko|Windows Phone/i)!=-1,Ar=Object.freeze(Object.defineProperty({__proto__:null,CHROMIUM_VERSION:on,IS_ANDROID:nn,IS_APPLE:Ht,IS_APPLE_MOBILE:Pe,IS_CHROMIUM:rn,IS_FIREFOX:_e,IS_MOBILE:ie,IS_MOBILE_SAFARI:He,IS_SAFARI:Z,USER_AGENT:Be},Symbol.toStringTag,{value:"Module"}));function Cr(t,e){return t.closest("."+e)}let Ie;function Yt(t){Ie?Ie.push(t):(Ie=[t],requestAnimationFrame(()=>{const e=Ie;Ie=void 0,e.forEach(s=>s())}))}let Ee,Tt=!1;function Oa(t){Ee?Tt?t():Ee.push(t):(Ee=[t],requestAnimationFrame(()=>{Tt=!0;for(let e=0;e<Ee.length;++e)Ee[e]();Ee=void 0,Tt=!1}))}let Me;function Ra(){return Me||(Me=new Promise(t=>Yt(()=>t())),Me.then(()=>{Me=void 0}),Me)}function kr(){return new Promise(t=>{Yt(()=>{Yt(t)})})}function _s(t){t.style.transform="translateY(-99999px)",t.focus(),kr().then(()=>{t.style.transform=""})}const ut=Z&&ie&&pe&&!1;if(ut){const t="clientY";let e=0;const s={capture:!0,passive:!1},n=o=>{const i=o.touches[0],a=Cr(i.target,"scrollable-y");if(a){const c=i[t],l=e-c,u=a.scrollTop,h=a.scrollHeight,d=a.clientHeight,v=u?Math.round(u+a.clientHeight+l):u+l;(h===d||v>=h||v<=0)&&o.preventDefault()}else o.preventDefault()};let r=0;document.addEventListener("focusin",o=>{!o.target.classList.contains("is-sticky-input-bugged")||o.timeStamp-r<50||(_s(o.target),document.addEventListener("touchmove",n,s),document.addEventListener("touchstart",i=>{i.touches.length>1||(e=i.touches[0][t])}))},{passive:!0}),document.addEventListener("focusout",o=>{document.removeEventListener("touchmove",n,s),r=o.timeStamp},{passive:!0}),document.addEventListener("visibilitychange",()=>{document.activeElement&&document.activeElement.classList.contains("is-sticky-input-bugged")&&document.activeElement.blur&&_s(document.activeElement)},{passive:!0})}function ja(t){ut&&t.classList.add("is-sticky-input-bugged")}const an="Roboto",Sr=an+', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif',Pr="16px",_r="400",Na=`${_r} ${Pr} ${Sr}`;function lt(){}function hs(t){return new Promise(e=>{setTimeout(e,t)})}const cn="tgico";function Wa(t){return cn+"-"+t}const It=["b","Ğ±"],Ts={},Tr={text:an,icons:cn,monospace:"Roboto Mono"};function Ir(t={text:It,icons:void 0,monospace:It}){if(!("fonts"in document))return Promise.resolve();const e=[];for(const s in t){let n=t[s];n==="all"&&(n=It);const r=Tr[s],o=s==="icons"?[500]:[400,500];for(const i of o){const a=(n||[void 0]).map(c=>{var l,u;const h=[i,"1rem",r].join(" ");return(l=Ts[h]??(Ts[h]={}))[u=c||""]??(l[u]=document.fonts.load(h,c))});e.push(...a)}}return Promise.race([Promise.all(e).catch(lt),hs(1e3)])}const $t=navigator.userAgent.search(/OS X|iPhone|iPad|iOS/i)!==-1;function un(t){return t instanceof URL||(t=new URL(t+"",location.href)),location.search&&t.protocol!=="blob:"&&new URLSearchParams(location.search).forEach((e,s)=>{t.searchParams.set(s,e)}),t.searchParams.delete("swfix"),t}function Mr(){const t={construct(e,s){return s[0]=un(s[0]),new e(...s)}};[Worker,typeof SharedWorker<"u"&&SharedWorker].filter(Boolean).forEach(e=>{window[e.name]=new Proxy(e,t)})}Mr();function Lr(){Element.prototype.toggleAttribute||(Element.prototype.toggleAttribute=function(t,e){return e!==void 0&&(e=!!e),this.hasAttribute(t)?e?!0:(this.removeAttribute(t),!1):e===!1?!1:(this.setAttribute(t,""),!0)})}const ln=0,Ua=1271266957,za=777,Va=2666e3,Ha=777e3,Ya=2147483647,$a="",Ga=20*1024*1024,xr="",qa=[7322096,16766590,13338331,9367192,16749490,16478047],Ja="default_static",ht=4294967296,Ka=ht+1,Za=!1,Br=new Set(["web","k","z","a"]),Xa=2147483646,Qa=new Set(["image/jpeg","image/png","image/bmp","image/gif"]),Or=0,Rr=1,jr=new Set([Or,Rr]);Math.max(...Array.from(jr))+1;const ec=!1;class ye{constructor(e){this._constructor(e)}_constructor(e){this.reuseResults=e,this.listeners={},this.listenerResults={}}addEventListener(e,s,n){var r;const o={callback:s,options:n};if(((r=this.listeners)[e]??(r[e]=new Set)).add(o),this.listenerResults.hasOwnProperty(e)&&(s(...this.listenerResults[e]),n==null?void 0:n.once)){this.listeners[e].delete(o);return}}addMultipleEventsListeners(e){for(const s in e)this.addEventListener(s,e[s])}removeEventListener(e,s,n){if(this.listeners[e]){for(const r of this.listeners[e])if(r.callback===s){this.listeners[e].delete(r);break}}}invokeListenerCallback(e,s,...n){var i;let r,o;try{r=s.callback(...n)}catch(a){o=a}if((i=s.options)!=null&&i.once&&this.removeEventListener(e,s.callback),o)throw o;return r}_dispatchEvent(e,s,...n){this.reuseResults&&(this.listenerResults[e]=n);const r=s&&[],o=this.listeners[e];if(o)for(const i of o){const a=this.invokeListenerCallback(e,i,...n);r&&r.push(a)}return r}dispatchResultableEvent(e,...s){return this._dispatchEvent(e,!0,...s)}dispatchEvent(e,...s){this._dispatchEvent(e,!1,...s)}cleanup(){this.listeners={},this.listenerResults={}}}const $={test:location.search.indexOf("test=1")>0,debug:location.search.indexOf("debug=1")>0,http:!1,ssl:!0,asServiceWorker:!1,transport:"websocket",noSharedWorker:location.search.indexOf("noSharedWorker=1")>0,multipleTransports:!0};($.http=location.search.indexOf("http=1")>0)&&($.multipleTransports=!1);$.multipleTransports&&($.http=!0);$.http&&($.transport="https");const Nr=!1,Ne=$.debug,Wr=typeof window<"u"?window:self,S=Wr,hn=Date.now()%Math.random()*1e8|0;function st(t,e){var n;const s=t.indexOf(e);return(n=s===-1?void 0:t.splice(s,1))==null?void 0:n[0]}const Ye=typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope,dn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&!Ye,ve=dn||Ye,Ur=()=>self.clients.matchAll({includeUncontrolled:!1,type:"window"}),zr=(t,...e)=>{try{t.postMessage(...e)}catch(s){console.error("[worker] postMessage error:",s,e)}},gn=(t,...e)=>{Ur().then(s=>{s.length&&s.slice(t?0:-1).forEach(n=>{zr(n,...e)})})};Ye&&gn.bind(null,!1);Ye&&gn.bind(null,!0);const Is={};function fe(t){return Is[t]??(Is[t]={type:t})}const Vr=Date.now();function dt(){return"["+((Date.now()-Vr)/1e3).toFixed(3)+"]"}var ds=(t=>(t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Log=4]="Log",t[t.Debug=8]="Debug",t))(ds||{});const Hr=[0,1,2,4,8],Yr=Z||_e,Ms=!Yr,Mt={reset:"\x1B[0m",bright:"\x1B[1m",dim:"\x1B[2m",underscore:"\x1B[4m",blink:"\x1B[5m",reverse:"\x1B[7m",hidden:"\x1B[8m",fg:{black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"},bg:{black:"\x1B[40m",red:"\x1B[41m",green:"\x1B[42m",yellow:"\x1B[43m",blue:"\x1B[44m",magenta:"\x1B[45m",cyan:"\x1B[46m",white:"\x1B[47m"}},$r=[["debug",8],["info",4],["warn",2],["error",1],["assert",1],["trace",4],["group",4],["groupCollapsed",4],["groupEnd",4]];function ee(t,e=7,s=!1,n=""){let r;!Ne&&!s&&(e=1),Ms?n||(Ye?n=Mt.fg.yellow:dn&&(n=Mt.fg.cyan)):n="";const o=n;n?n=`%s ${n}%s`:n="%s";const i=function(...c){return e&4&&console.log(n,dt(),t,...c)};$r.forEach(([c,l])=>{i[c]=function(...u){return e&l&&console[c](n,dt(),t,...u)}}),i.setPrefix=function(c){r=c,t="["+c+"]"},i.setPrefix(t),i.setLevel=function(c){e=Hr.slice(0,c+1).reduce((l,u)=>l|u,0)};const a={};return i.bindPrefix=function(c,l=e){return a[c]??(a[c]=ee(`${r}] ${Ms&&o?Mt.reset:""}[${c}`,l,s,o))},i}const Gr=!0;class gs extends ye{constructor(e){super(!1),this.logSuffix=e,this.onMessage=s=>{const n=s.data,r=s.source||s.currentTarget;this.processTaskMap[n.type](n,r,s)},this.processResultTask=s=>{const{taskId:n,result:r,error:o}=s.payload,i=this.awaiting[n];i&&(this.debug&&this.log.debug("done",i.taskType,r,o),"error"in s.payload?i.reject(o):i.resolve(r),delete this.awaiting[n])},this.processAckTask=s=>{const n=s.payload,r=this.awaiting[n.taskId];if(!r)return;const o=r.resolve,i={cached:n.cached,result:n.cached?"result"in n?Promise.resolve(n.result):Promise.reject(n.error):new Promise((a,c)=>{r.resolve=a,r.reject=c})};o(i),n.cached&&delete this.awaiting[n.taskId]},this.processPingTask=(s,n,r)=>{this.pushTask(this.createTask("pong",void 0),r.source)},this.processPongTask=(s,n,r)=>{const o=this.pingResolves.get(n);o&&(this.pingResolves.delete(n),o())},this.processCloseTask=(s,n,r)=>{this.detachPort(n)},this.processBatchTask=(s,n,r)=>{const o={data:r.data,source:r.source,currentTarget:r.currentTarget};s.payload.forEach(i=>{o.data=i,this.onMessage(o)})},this.processLockTask=(s,n,r)=>{const o=s.payload;this.requestedLocks.has(o)||(this.requestedLocks.set(o,n),navigator.locks.request(o,()=>{this.processCloseTask(void 0,n,void 0),this.requestedLocks.delete(o)}))},this.processInvokeTask=async(s,n,r)=>{const o=s.id,i=s.payload;let a,c,l;i.void||(a={taskId:o},c=this.createTask("result",a)),i.withAck&&(l=this.createTask("ack",{taskId:o,cached:!0}));let u;try{const h=this.listeners[i.type];if(!(h!=null&&h.size))throw new Error("no listener");const d=h.values().next().value;let v=this.invokeListenerCallback(i.type,d,i.payload,n,r);if(i.void)return;if(u=v instanceof Promise,l){const w=!u;if(l.payload.cached=w,w&&(l.payload.result=v),this.pushTask(l,n),w)return}u&&(v=await v),a.result=v}catch(h){if(this.log.error("worker task error:",h,s),i.void)return;if(l&&l.payload.cached){l.payload.error=h,this.pushTask(l,n);return}a.error=h}this.pushTask(c,n)},this.listenPorts=[],this.sendPorts=[],this.pingResolves=new Map,this.taskId=0,this.awaiting={},this.pending=new Map,this.log=ee("MP"+(e?"-"+e:"")),this.debug=Ne,this.heldLocks=new Map,this.requestedLocks=new Map,this.processTaskMap={result:this.processResultTask,ack:this.processAckTask,invoke:this.processInvokeTask,ping:this.processPingTask,pong:this.processPongTask,close:this.processCloseTask,lock:this.processLockTask,batch:this.processBatchTask}}setOnPortDisconnect(e){this.onPortDisconnect=e}attachPort(e){this.attachListenPort(e),this.attachSendPort(e)}attachListenPort(e){this.listenPorts.push(e),e.addEventListener("message",this.onMessage)}attachSendPort(e){var s;if(this.log.warn("attaching send port"),(s=e.start)==null||s.call(e),this.sendPorts.push(e),typeof window<"u"&&Gr)if("locks"in navigator){const n=["lock",hn,this.logSuffix||"",Math.random()*2147483647|0].join("-");this.log.warn("created lock",n);const r=new Promise(o=>this.heldLocks.set(e,{resolve:o,id:n})).then(()=>this.heldLocks.delete(e));navigator.locks.request(n,()=>(this.resendLockTask(e),r))}else window.addEventListener("beforeunload",()=>{const n=this.createTask("close",void 0);this.postMessage(void 0,n)});this.releasePending()}resendLockTask(e){const s=this.heldLocks.get(e);s&&this.pushTask(this.createTask("lock",s.id),e)}detachPort(e){var n,r,o,i;this.log.warn("disconnecting port"),st(this.listenPorts,e),st(this.sendPorts,e),(n=e.removeEventListener)==null||n.call(e,"message",this.onMessage),(r=e.close)==null||r.call(e),(o=this.onPortDisconnect)==null||o.call(this,e),(i=this.heldLocks.get(e))==null||i.resolve();const s=fe("PORT_DISCONNECTED");for(const a in this.awaiting){const c=this.awaiting[a];c.port===e&&(c.reject(s),delete this.awaiting[a])}}postMessage(e,s){(Array.isArray(e)?e:e?[e]:this.sendPorts).forEach(n=>{n.postMessage(s,s.transfer)})}async releasePending(){this.releasingPending||(this.releasingPending=!0,await Promise.resolve(),this.debug&&this.log.debug("releasing tasks, length:",this.pending.size),this.pending.forEach((e,s)=>{let n=e;{let o;n=[],e.forEach(i=>{i.transfer?(o=void 0,n.push(i)):(o||(o=this.createTask("batch",[]),n.push(o)),o.payload.push(i))})}const r=s?[s]:this.sendPorts;r.length&&(n.forEach(o=>{try{this.postMessage(r,o)}catch(i){this.log.error("postMessage error:",i,o,r)}}),this.pending.delete(s))}),this.debug&&this.log.debug("released tasks"),this.releasingPending=!1)}createTask(e,s,n){return{type:e,payload:s,id:this.taskId++,transfer:n}}createInvokeTask(e,s,n,r,o){return this.createTask("invoke",{type:e,payload:s,withAck:n,void:r},o)}pushTask(e,s){let n=this.pending.get(s);n||this.pending.set(s,n=[]),n.push(e),this.releasePending()}invokeVoid(e,s,n,r){const o=this.createInvokeTask(e,s,void 0,!0,r);this.pushTask(o,n)}invoke(e,s,n,r,o){this.debug&&this.log.debug("start",e,s);let i;const a=new Promise((c,l)=>{i=this.createInvokeTask(e,s,n,void 0,o),this.awaiting[i.id]={resolve:c,reject:l,taskType:e,port:r},this.pushTask(i,r)});if(ve){a.finally(()=>{clearInterval(c)});const c=ls.setInterval(()=>{this.log.error("task still has no result",i,r)},6e4)}return a}invokeExceptSource(e,s,n){const r=this.sendPorts.slice();st(r,n),r.forEach(o=>{this.invokeVoid(e,s,o)})}}class $e extends gs{constructor(){super("MTPROTO"),$e.INSTANCE=this,S&&(S.mtprotoMessagePort=this)}static getInstance(){return this.INSTANCE}}class qr extends ye{constructor(){super(),this.myId=ln,this.connectionStatus={},this.premium=!1,this.addEventListener("user_auth",({id:e})=>{this.myId=e.toPeerId()}),this.addEventListener("premium_toggle_private",({isNew:e,isPremium:s})=>{this.premium=s,e||this.dispatchEventSingle("premium_toggle",s)}),this.addEventListener("connection_status_change",e=>{this.connectionStatus[e.name]=e}),this.dispatchEvent=(e,...s)=>{super.dispatchEvent(e,...s),$e.getInstance().invokeVoid("event",{name:e,args:s})},ve||this.addEventListener("settings_updated",({settings:e})=>{this.settings=e})}getConnectionStatus(){return this.connectionStatus}getPremium(){return this.premium}dispatchEventSingle(...e){super.dispatchEvent(...e)}}const b=new qr;S.rootScope=b;const Jr={isFulfilled:!1,isRejected:!1,notify:()=>{},notifyAll:function(...t){var e;this.lastNotify=t,(e=this.listeners)==null||e.forEach(s=>s(...t))},addNotifyListener:function(t){this.lastNotify&&t(...this.lastNotify),(this.listeners??(this.listeners=[])).push(t)},resolve:function(t){this.isFulfilled||this.isRejected||(this.isFulfilled=!0,this._resolve(t),this.onFinish())},reject:function(...t){this.isRejected||this.isFulfilled||(this.isRejected=!0,this._reject(...t),this.onFinish())},onFinish:function(){this.notify=this.notifyAll=this.lastNotify=null,this.listeners&&(this.listeners.length=0),this.cancel&&(this.cancel=lt)}};function ne(){let t,e;const s=new Promise((n,r)=>{t=n,e=r});return Object.assign(s,Jr),s._resolve=t,s._reject=e,s}function tc(t,e){t.then(e.resolve.bind(e),e.reject.bind(e))}self.deferredPromise=ne;function Lt(t,e,s=!0){let n=null,r,o;const i=()=>{clearInterval(n),n=null},a=(...c)=>{r=!0,o=c,n||(s&&(r=!1,t(...o)),n=setInterval(()=>{if(!r){i();return}r=!1,t(...o)},e))};return a.clear=i,a}function Gt(t,e){if(e)for(const s in e)e[s]!==void 0&&(t[s]=e[s]);return t}const mn=class qt{constructor(e){Gt(this,e),$.test&&(this.name+="_test"),this.storageIsAvailable=!0,this.log=ee(["IDB",e.name].join("-")),this.log("constructor"),this.openDatabase(!0),qt.INSTANCES.push(this)}isAvailable(){return this.storageIsAvailable}openDatabase(e=!1){if(this.openDbPromise&&!e)return this.openDbPromise;const s=(i,a)=>{var l;const c=Array.from(i.indexNames);for(const u of c)i.deleteIndex(u);if((l=a.indexes)!=null&&l.length)for(const u of a.indexes)i.indexNames.contains(u.indexName)||i.createIndex(u.indexName,u.keyPath,u.objectParameters)},n=(i,a)=>{const c=i.createObjectStore(a.name);s(c,a)};try{var r=indexedDB.open(this.name,this.version);if(!r)return Promise.reject()}catch(i){return this.log.error("error opening db",i.message),this.storageIsAvailable=!1,Promise.reject(i)}let o=!1;return setTimeout(()=>{o||r.onerror(fe("IDB_CREATE_TIMEOUT"))},3e3),this.openDbPromise=new Promise((i,a)=>{r.onsuccess=c=>{o=!0;const l=r.result;let u=!1;this.log("Opened"),l.onerror=h=>{this.storageIsAvailable=!1,this.log.error("Error creating/accessing IndexedDB database",h),a(h)},l.onclose=h=>{this.log.error("closed:",h),!u&&this.openDatabase()},l.onabort=h=>{this.log.error("abort:",h);const d=h.target;this.openDatabase(u=!0),d.onerror&&d.onerror(h),l.close()},l.onversionchange=h=>{this.log.error("onversionchange, lol?")},i(this.db=l)},r.onerror=c=>{o=!0,this.storageIsAvailable=!1,this.log.error("Error creating/accessing IndexedDB database",c),a(c)},r.onupgradeneeded=c=>{o=!0,this.log.warn("performing idb upgrade from",c.oldVersion,"to",c.newVersion);const l=c.target,u=l.result;this.stores.forEach(h=>{if(!u.objectStoreNames.contains(h.name))n(u,h);else{const d=l.transaction.objectStore(h.name);s(d,h)}})}})}static create(e){return this.INSTANCES.find(s=>s.name===e.name)??new qt(e)}static closeDatabases(e){this.INSTANCES.forEach(s=>{if(e&&e===s)return;const n=s.db;n&&(n.onclose=()=>{},n.close())})}};mn.INSTANCES=[];let Kr=mn;class Zr{constructor(e,s){this.storeName=s,this.log=ee(["IDB",e.name,s].join("-")),this.idb=Kr.create(e)}delete(e,s){const n=Array.isArray(e);return n||(e=[].concat(e)),this.getObjectStore("readwrite",r=>{const o=e.map(i=>r.delete(i));return n?o:o[0]},"",s)}clear(e){return this.getObjectStore("readwrite",s=>s.clear(),"",e)}save(e,s,n){const r=Array.isArray(e);return r||(e=[].concat(e),s=[].concat(s)),this.getObjectStore("readwrite",o=>{const i=e.map((a,c)=>o.put(s[c],a));return r?i:i[0]},"",n)}get(e,s){const n=Array.isArray(e);if(n){if(!e.length)return Promise.resolve([])}else{if(!e)return;e=[].concat(e)}return this.getObjectStore("readonly",r=>{const o=e.map(i=>r.get(i));return n?o:o[0]},"",s)}getObjectStore(e,s,n,r=this.storeName){let o;return n&&(o=performance.now(),this.log(n+": start")),this.idb.openDatabase().then(i=>new Promise((a,c)=>{const l=i.transaction([r],e,{durability:"relaxed"}),u=()=>{clearTimeout(v),c(l.error)},h=()=>{clearTimeout(v),n&&this.log(n+": end",performance.now()-o);const C=f.map(F=>F.result);a(p?C:C[0])};l.onerror=u;const d=e==="readwrite";d&&(l.oncomplete=()=>h());const v=setTimeout(()=>{this.log.error("transaction not finished",l,n)},1e4),w=s(l.objectStore(r)),p=Array.isArray(w),f=p?w:[].concat(w);if(d)return;const k=f.length;let A=k;const P=()=>{l.error||--A||h()};for(let C=0;C<k;++C){const F=f[C];F.onerror=u,F.onsuccess=P}}))}getAll(e){return this.getObjectStore("readonly",s=>s.getAll(),"",e)}}function Ls(){}const xt=16,Dn=class nt{constructor(e,s){this.db=e,this.storeName=s,this.cache={},this.getPromises=new Map,this.keysToSet=new Set,this.saveDeferred=ne(),this.keysToDelete=new Set,this.deleteDeferred=ne(),this.storage=new Zr(e,s),nt.STORAGES.length?this.useStorage=nt.STORAGES[0].useStorage:this.useStorage=!0,this.savingFreezed=!1,nt.STORAGES.push(this),this.saveThrottled=Lt(async()=>{const n=this.saveDeferred;this.saveDeferred=ne();const r=this.keysToSet;if(r.size){const o=Array.from(r.values());r.clear();const i=o.map(a=>this.cache[a]);try{await this.storage.save(o,i)}catch(a){console.error("[AS]: set error:",a,o,i)}}n.resolve(),r.size&&this.saveThrottled()},xt,!1),this.deleteThrottled=Lt(async()=>{const n=this.deleteDeferred;this.deleteDeferred=ne();const r=this.keysToDelete;if(r.size){const o=Array.from(r.values());r.clear();try{await this.storage.delete(o)}catch(i){console.error("[AS]: delete error:",i,o)}}n.resolve(),r.size&&this.deleteThrottled()},xt,!1),this.getThrottled=Lt(async()=>{const n=Array.from(this.getPromises.keys());this.storage.get(n).then(r=>{for(let o=0,i=n.length;o<i;++o){const a=n[o],c=this.getPromises.get(a);c&&(c.resolve(this.cache[a]=r[o]),this.getPromises.delete(a))}},r=>{new Set(["NO_ENTRY_FOUND","STORAGE_OFFLINE"]).has(r.type)||(this.useStorage=!1,console.error("[AS]: get error:",r,n,s));for(let o=0,i=n.length;o<i;++o){const a=n[o],c=this.getPromises.get(a);c&&(c.resolve(void 0),this.getPromises.delete(a))}}).finally(()=>{this.getPromises.size&&this.getThrottled()})},xt,!1)}isAvailable(){return this.useStorage}getCache(){return this.cache}getFromCache(e){return this.cache[e]}setToCache(e,s){return this.cache[e]=s}async get(e,s=!0){if(this.cache.hasOwnProperty(e)&&s)return this.getFromCache(e);if(this.useStorage){const n=this.getPromises.get(e);if(n)return n;const r=ne();return this.getPromises.set(e,r),this.getThrottled(),r}}getAll(){return this.storage.getAll().catch(()=>[])}set(e,s=!1){const n=this.useStorage&&!s&&!this.savingFreezed;for(const r in e)if(e.hasOwnProperty(r)){const o=e[r];this.setToCache(r,o),n&&(this.keysToSet.add(r),this.keysToDelete.delete(r),this.saveThrottled())}return n?this.saveDeferred:Promise.resolve()}delete(e,s=!1){return e=""+e,s||delete this.cache[e],this.useStorage&&(this.keysToSet.delete(e),this.keysToDelete.add(e),this.deleteThrottled()),this.useStorage?this.deleteDeferred:Promise.resolve()}clear(e=!1){if(!e)for(const s in this.cache)delete this.cache[s];return this.storage.clear().catch(Ls)}static toggleStorage(e,s){return Promise.all(this.STORAGES.map(n=>{if(n.useStorage=e,!(!ve||!s))return e?n.set(n.cache):(n.keysToSet.clear(),n.keysToDelete.clear(),n.getPromises.forEach(r=>r.resolve(void 0)),n.getPromises.clear(),n.clear(!0))})).catch(Ls)}static freezeSaving(e,s){this.STORAGES.forEach(n=>n.savingFreezed=!0);try{e()}catch(n){console.error("freezeSaving callback error:",n)}this.STORAGES.forEach(n=>n.savingFreezed=!1)}};Dn.STORAGES=[];let ms=Dn;S&&(S.AppStorage=ms);const Xr={name:"tweb",version:7,stores:[{name:"session"},{name:"stickerSets"},{name:"users"},{name:"chats"},{name:"dialogs"},{name:"messages"}]};class Qr extends ms{constructor(){super(Xr,"session")}}const Ce=new Qr;S.stateStorage=Ce;function pn(t,e,s){const n=s&&new Set(s),r=a=>Object.keys(a).filter(c=>a[c]!==void 0),o=s?a=>r(a).filter(c=>!n.has(c)):r,i=typeof t;return t&&e&&i==="object"&&i===typeof e?o(t).length===o(e).length&&o(t).every(a=>pn(t[a],e[a],s)):t===e}function Et(t){return t.charAt(0).toUpperCase()+t.slice(1)}const eo=new Set(["javascript:"]);function fn(t){if(!t)return null;try{const e=new URL(t).protocol;return eo.has(e)?null:e}catch{return null}}const to="((?:ğŸ‘¨ğŸ»â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ¼â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ½â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ¾â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ¿â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ»â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ»â€â¤ï¸?â€ğŸ’‹â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¼â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¼â€â¤ï¸?â€ğŸ’‹â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ½â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ½â€â¤ï¸?â€ğŸ’‹â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¾â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¾â€â¤ï¸?â€ğŸ’‹â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¿â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¿â€â¤ï¸?â€ğŸ’‹â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ§‘ğŸ»â€â¤ï¸?â€ğŸ’‹â€ğŸ§‘\uD83C[\uDFFC-\uDFFF]|ğŸ§‘ğŸ¼â€â¤ï¸?â€ğŸ’‹â€ğŸ§‘\uD83C[\uDFFB\uDFFD-\uDFFF]|ğŸ§‘ğŸ½â€â¤ï¸?â€ğŸ’‹â€ğŸ§‘\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|ğŸ§‘ğŸ¾â€â¤ï¸?â€ğŸ’‹â€ğŸ§‘\uD83C[\uDFFB-\uDFFD\uDFFF]|ğŸ§‘ğŸ¿â€â¤ï¸?â€ğŸ’‹â€ğŸ§‘\uD83C[\uDFFB-\uDFFE]|ğŸ‘¨ğŸ»â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ»â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFC-\uDFFF]|ğŸ‘¨ğŸ¼â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ¼â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB\uDFFD-\uDFFF]|ğŸ‘¨ğŸ½â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ½â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|ğŸ‘¨ğŸ¾â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ¾â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB-\uDFFD\uDFFF]|ğŸ‘¨ğŸ¿â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ¿â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB-\uDFFE]|ğŸ‘©ğŸ»â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ»â€â¤ï¸?â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ»â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFC-\uDFFF]|ğŸ‘©ğŸ»â€ğŸ¤â€ğŸ‘©\uD83C[\uDFFC-\uDFFF]|ğŸ‘©ğŸ¼â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¼â€â¤ï¸?â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¼â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB\uDFFD-\uDFFF]|ğŸ‘©ğŸ¼â€ğŸ¤â€ğŸ‘©\uD83C[\uDFFB\uDFFD-\uDFFF]|ğŸ‘©ğŸ½â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ½â€â¤ï¸?â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ½â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|ğŸ‘©ğŸ½â€ğŸ¤â€ğŸ‘©\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|ğŸ‘©ğŸ¾â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¾â€â¤ï¸?â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB-\uDFFD\uDFFF]|ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘©\uD83C[\uDFFB-\uDFFD\uDFFF]|ğŸ‘©ğŸ¿â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¿â€â¤ï¸?â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB-\uDFFE]|ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘©\uD83C[\uDFFB-\uDFFE]|ğŸ§‘ğŸ»â€â¤ï¸?â€ğŸ§‘\uD83C[\uDFFC-\uDFFF]|ğŸ§‘ğŸ»â€ğŸ¤â€ğŸ§‘\uD83C[\uDFFB-\uDFFF]|ğŸ§‘ğŸ¼â€â¤ï¸?â€ğŸ§‘\uD83C[\uDFFB\uDFFD-\uDFFF]|ğŸ§‘ğŸ¼â€ğŸ¤â€ğŸ§‘\uD83C[\uDFFB-\uDFFF]|ğŸ§‘ğŸ½â€â¤ï¸?â€ğŸ§‘\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|ğŸ§‘ğŸ½â€ğŸ¤â€ğŸ§‘\uD83C[\uDFFB-\uDFFF]|ğŸ§‘ğŸ¾â€â¤ï¸?â€ğŸ§‘\uD83C[\uDFFB-\uDFFD\uDFFF]|ğŸ§‘ğŸ¾â€ğŸ¤â€ğŸ§‘\uD83C[\uDFFB-\uDFFF]|ğŸ§‘ğŸ¿â€â¤ï¸?â€ğŸ§‘\uD83C[\uDFFB-\uDFFE]|ğŸ§‘ğŸ¿â€ğŸ¤â€ğŸ§‘\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨|ğŸ‘©â€â¤ï¸?â€ğŸ’‹â€\uD83D[\uDC68\uDC69]|ğŸ«±ğŸ»â€ğŸ«²\uD83C[\uDFFC-\uDFFF]|ğŸ«±ğŸ¼â€ğŸ«²\uD83C[\uDFFB\uDFFD-\uDFFF]|ğŸ«±ğŸ½â€ğŸ«²\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|ğŸ«±ğŸ¾â€ğŸ«²\uD83C[\uDFFB-\uDFFD\uDFFF]|ğŸ«±ğŸ¿â€ğŸ«²\uD83C[\uDFFB-\uDFFE]|ğŸ‘¨â€â¤ï¸?â€ğŸ‘¨|ğŸ‘©â€â¤ï¸?â€\uD83D[\uDC68\uDC69]|ğŸ§‘â€ğŸ¤â€ğŸ§‘|ğŸ‘«\uD83C[\uDFFB-\uDFFF]|ğŸ‘¬\uD83C[\uDFFB-\uDFFF]|ğŸ‘­\uD83C[\uDFFB-\uDFFF]|ğŸ’\uD83C[\uDFFB-\uDFFF]|ğŸ’‘\uD83C[\uDFFB-\uDFFF]|ğŸ¤\uD83C[\uDFFB-\uDFFF]|\uD83D[\uDC6B-\uDC6D\uDC8F\uDC91]|ğŸ¤)|(?:\uD83D[\uDC68\uDC69]|ğŸ§‘)(?:\uD83C[\uDFFB-\uDFFF])?â€(?:âš•ï¸?|âš–ï¸?|âœˆï¸?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C[\uDFCB\uDFCC]|\uD83D[\uDD74\uDD75]|â›¹)(?:(?:\uD83C[\uDFFB-\uDFFF]|ï¸?)â€[â™€â™‚]ï¸?)|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?â€[â™€â™‚]ï¸?|(?:ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦|ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€\uD83D[\uDC66\uDC67]|ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦|ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€\uD83D[\uDC66\uDC67]|ğŸ‘©â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦|ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€\uD83D[\uDC66\uDC67]|ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦|ğŸ‘¨â€ğŸ‘§â€\uD83D[\uDC66\uDC67]|ğŸ‘¨â€ğŸ‘¨â€\uD83D[\uDC66\uDC67]|ğŸ‘¨â€ğŸ‘©â€\uD83D[\uDC66\uDC67]|ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦|ğŸ‘©â€ğŸ‘§â€\uD83D[\uDC66\uDC67]|ğŸ‘©â€ğŸ‘©â€\uD83D[\uDC66\uDC67]|ğŸ³ï¸?â€âš§ï¸?|ğŸ³ï¸?â€ğŸŒˆ|ğŸ˜¶â€ğŸŒ«ï¸?|â¤ï¸?â€ğŸ”¥|â¤ï¸?â€ğŸ©¹|ğŸ´â€â˜ ï¸?|ğŸ•â€ğŸ¦º|ğŸ»â€â„ï¸?|ğŸ‘â€ğŸ—¨|ğŸ‘¨â€\uD83D[\uDC66\uDC67]|ğŸ‘©â€\uD83D[\uDC66\uDC67]|ğŸ‘¯â€â™€ï¸?|ğŸ‘¯â€â™‚ï¸?|ğŸ˜®â€ğŸ’¨|ğŸ˜µâ€ğŸ’«|ğŸ¤¼â€â™€ï¸?|ğŸ¤¼â€â™‚ï¸?|ğŸ§â€â™€ï¸?|ğŸ§â€â™‚ï¸?|ğŸ§Ÿâ€â™€ï¸?|ğŸ§Ÿâ€â™‚ï¸?|ğŸˆâ€â¬›)|[#*0-9]ï¸??âƒ£|(?:[Â©Â®â„¢â™Ÿ]ï¸?)|(?:\uD83C[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE1A\uDE2F\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF3\uDFF5\uDFF7]|\uD83D[\uDC3F\uDC41\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]|[â€¼â‰â„¹â†”-â†™â†©â†ªâŒšâŒ›âŒ¨ââ­-â¯â±â²â¸-âºâ“‚â–ªâ–«â–¶â—€â—»-â—¾â˜€-â˜„â˜â˜‘â˜”â˜•â˜˜â˜ â˜¢â˜£â˜¦â˜ªâ˜®â˜¯â˜¸-â˜ºâ™€â™‚â™ˆ-â™“â™ â™£â™¥â™¦â™¨â™»â™¿âš’-âš—âš™âš›âšœâš âš¡âš§âšªâš«âš°âš±âš½âš¾â›„â›…â›ˆâ›â›‘â›“â›”â›©â›ªâ›°-â›µâ›¸â›ºâ›½âœ‚âœˆâœ‰âœâœ’âœ”âœ–âœâœ¡âœ³âœ´â„â‡â—â£â¤â¡â¤´â¤µâ¬…-â¬‡â¬›â¬œâ­â­•ã€°ã€½ãŠ—ãŠ™])(?:ï¸?|(?!ï¸))|(?:(?:\uD83C[\uDFCB\uDFCC]|\uD83D[\uDD74\uDD75\uDD90]|[â˜â›·â›¹âœŒâœ])(?:ï¸?|(?!ï¸))|(?:\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD7A\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD\uDEC3-\uDEC5\uDEF0-\uDEF6]|[âœŠâœ‹]))(?:\uD83C[\uDFFB-\uDFFF])?|(?:ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿|ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿|ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿|ğŸ‡¦\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|ğŸ‡§\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|ğŸ‡¨\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|ğŸ‡©\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|ğŸ‡ª\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|ğŸ‡«\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|ğŸ‡¬\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|ğŸ‡­\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|ğŸ‡®\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|ğŸ‡¯\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|ğŸ‡°\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|ğŸ‡±\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|ğŸ‡²\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|ğŸ‡³\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|ğŸ‡´ğŸ‡²|ğŸ‡µ\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|ğŸ‡¶ğŸ‡¦|ğŸ‡·\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|ğŸ‡¸\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|ğŸ‡¹\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|ğŸ‡º\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|ğŸ‡»\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|ğŸ‡¼\uD83C[\uDDEB\uDDF8]|ğŸ‡½ğŸ‡°|ğŸ‡¾\uD83C[\uDDEA\uDDF9]|ğŸ‡¿\uD83C[\uDDE6\uDDF2\uDDFC]|\uD83C[\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC6F\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDD-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3C\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDDE-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC2\uDED0-\uDED9\uDEE0-\uDEE7]|[â©-â¬â°â³â™¾â›âœ…âœ¨âŒââ“-â•â•-â—â°â¿î”Š])|ï¸)",je="a-z\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0100-\\u024f\\u0253\\u0254\\u0256\\u0257\\u0259\\u025b\\u0263\\u0268\\u026f\\u0272\\u0289\\u028b\\u02bb\\u0300-\\u036f\\u1e00-\\u1eff\\u0400-\\u04ff\\u0500-\\u0527\\u2de0-\\u2dff\\ua640-\\ua69f\\u0591-\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u05d0-\\u05ea\\u05f0-\\u05f4\\ufb1d-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufb4f\\u0610-\\u061a\\u0620-\\u065f\\u066e-\\u06d3\\u06d5-\\u06dc\\u06de-\\u06e8\\u06ea-\\u06ef\\u06fa-\\u06fc\\u06ff\\u0750-\\u077f\\u08a0\\u08a2-\\u08ac\\u08e4-\\u08fe\\ufb50-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\u200c\\u0e01-\\u0e3a\\u0e40-\\u0e4e\\u1100-\\u11ff\\u3130-\\u3185\\uA960-\\uA97F\\uAC00-\\uD7AF\\uD7B0-\\uD7FF\\u3003\\u3005\\u303b\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uff9f\\uffa1-\\uffdc",so="0-9_"+je,xs="Â·",Je="["+je+"0-9]",no="((?:https?|ftp)://|mailto:)?",ro=no+"(?:"+Je+"{1,64}(?::"+Je+"{0,64})?@)?(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}|"+Je+"["+je+xs+"0-9-]{0,64}(?:\\."+Je+"["+je+xs+"0-9-]{0,64}){0,10}(?:\\.(xn--[0-9a-z]{2,16}|["+je+`]{2,24})))(?::\\d{2,5})?(?:/(?:\\S{0,255}[^\\s.;,(\\[\\]{}<>"'])?)?`,vn="[a-zA-Z\\d_]{5,32}",oo="(?:\\s|^)((?:(\\d{1,2}):(?:[0-5]?[0-9])|(?:\\d{1,2}|\\d{3,})):(?:[0-5][0-9]))(?:\\s|$)",io="\\/([a-zA-Z\\d_]{1,32})(?:@("+vn+"))?(\\b|$)",sc=new RegExp("(^| )(@)("+vn+")|("+ro+")|(\\n)|("+to+")|(^|[\\s\\(\\]])(#["+so+"]{2,64})|(^|\\s)"+io+"|"+oo,"i"),nc=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,rc=/(^|\s|\n)(````?)([\s\S]+?)(````?)([\s\n\.,:?!;]|$)|(^|\s|\x01)(`|~~|\*\*|__|_-_|\|\|)([^\n]+?)\7([\x01\s\.,:?!;]|$)|@(\d+)\s*\((.+?)\)|(\[(.+?)\]\((.+?)\))/m,oc={Telegram:"tg://search_hashtag?hashtag={1}",Twitter:"https://twitter.com/hashtag/{1}",Instagram:"https://instagram.com/explore/tags/{1}/","Google Plus":"https://plus.google.com/explore/{1}"},Jt={"`":"messageEntityCode","``":"messageEntityPre","**":"messageEntityBold",__:"messageEntityItalic","~~":"messageEntityStrike","_-_":"messageEntityUnderline","||":"messageEntitySpoiler"};new Set(Object.values(Jt));const Fn=new Set(["messageEntityEmoji","messageEntityLinebreak","messageEntityCaret"]),ic=new Set(Fn);for(const t in Jt)Fn.add(Jt[t]);const ao=/^\+\d+$/;function yn(t,e){var i;fn(t)||(t="https://"+t);const s={url:t};let n,r,o;if(n=t.match(/^(?:https?:\/\/)?(?:(.+?)\.)?(?:(?:web|k|z|a)\.)?t(?:elegram)?\.me(?:\/(.+))?/)){const a=new URL(t);let c=n[1];c&&Br.has(n[1])&&(c=void 0),c&&(a.pathname=c+(a.pathname==="/"?"":a.pathname));const l=a.pathname.slice(1),u=l.split("/");if(u[0]&&u[0][0]==="$"&&u[0].length>1)o="invoice";else if(/^\+/.test(l)&&!ao.test(l))o="joinchat";else if(u[0])switch(u[0]){case"m":case"addlist":case"joinchat":case"addstickers":case"addemoji":case"voicechat":case"invoice":case"boost":case"giftcode":if(u.length!==1&&!c){o=u[0];break}default:if(u.length<=2||(i=u[1])!=null&&i.match(/^\d+(?:\?(?:comment|thread)=\d+)?$/)||u[1]==="s"){o="im";break}break}}else t.match(/^(?:https?:\/\/)?telesco\.pe\/([^/?]+)\/(\d+)/)?o="im":(r=t.match(/tg:(?:\/\/)?(.+?)(?:\?|$)/))&&(o="tg_"+r[1]);return window[o]||(o=void 0),s.onclick=o,s}S&&(S.wrapUrl=yn);function ac(t,e){bn(t),e===void 0?t.replaceChildren():typeof e=="string"?e?t.textContent=e:t.replaceChildren():t.replaceChildren(e)}function bn(t){t.setAttribute("dir","auto")}function cc(){return"auto"}function co(t){return t.target="_blank",t.rel="noopener noreferrer",t}const uc={context:void 0,registry:void 0},uo=(t,e)=>t===e,X=Symbol("solid-proxy"),Kt=Symbol("solid-track"),gt={equals:uo};let wn=kn;const ae=1,mt=2,En={owned:null,cleanups:null,context:null,owner:null},Bt={};var T=null;let Ot=null,L=null,W=null,oe=null,At=0;function rt(t,e){const s=L,n=T,r=t.length===0,o=e===void 0?n:e,i=r?En:{owned:null,cleanups:null,context:o?o.context:null,owner:o},a=r?t:()=>t(()=>J(()=>Ct(i)));T=i,L=null;try{return te(a,!0)}finally{L=s,T=n}}function re(t,e){e=e?Object.assign({},gt,e):gt;const s={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},n=r=>(typeof r=="function"&&(r=r(s.value)),Cn(s,r));return[An.bind(s),n]}function Bs(t,e,s){const n=Ge(t,e,!0,ae);be(n)}function lo(t,e,s){const n=Ge(t,e,!1,ae);be(n)}function ho(t,e,s){wn=wo;const n=Ge(t,e,!1,ae);(!s||!s.render)&&(n.user=!0),oe?oe.push(n):be(n)}function lc(t,e){let s;const n=Ge(()=>{s?s():J(t),s=void 0},void 0,!1,0);return n.user=!0,r=>{s=r,be(n)}}function le(t,e,s){s=s?Object.assign({},gt,s):gt;const n=Ge(t,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=s.equals||void 0,be(n),An.bind(n)}function go(t){return t&&typeof t=="object"&&"then"in t}function hc(t,e,s){let n,r,o;arguments.length===2&&typeof e=="object"||arguments.length===1?(n=!0,r=t,o=e||{}):(n=t,r=e,o={});let i=null,a=Bt,c=!1,l="initialValue"in o,u=typeof n=="function"&&le(n);const h=new Set,[d,v]=(o.storage||re)(o.initialValue),[w,p]=re(void 0),[f,k]=re(void 0,{equals:!1}),[A,P]=re(l?"ready":"unresolved");function C(y,M,g,m){return i===y&&(i=null,m!==void 0&&(l=!0),(y===a||M===a)&&o.onHydrated&&queueMicrotask(()=>o.onHydrated(m,{value:M})),a=Bt,F(M,g)),M}function F(y,M){te(()=>{M===void 0&&v(()=>y),P(M!==void 0?"errored":l?"ready":"unresolved"),p(M);for(const g of h.keys())g.decrement();h.clear()},!1)}function _(){const y=Fo,M=d(),g=w();if(g!==void 0&&!i)throw g;return L&&!L.user&&y&&Bs(()=>{f(),i&&(y.resolved||h.has(y)||(y.increment(),h.add(y)))}),M}function x(y=!0){if(y!==!1&&c)return;c=!1;const M=u?u():n;if(M==null||M===!1){C(i,J(d));return}const g=a!==Bt?a:J(()=>r(M,{value:d(),refetching:y}));return go(g)?(i=g,"value"in g?(g.status==="success"?C(i,g.value,void 0,M):C(i,void 0,void 0,M),g):(c=!0,queueMicrotask(()=>c=!1),te(()=>{P(l?"refreshing":"pending"),k()},!1),g.then(m=>C(g,m,void 0,M),m=>C(g,void 0,Pn(m),M)))):(C(i,g,void 0,M),g)}return Object.defineProperties(_,{state:{get:()=>A()},error:{get:()=>w()},loading:{get(){const y=A();return y==="pending"||y==="refreshing"}},latest:{get(){if(!l)return _();const y=w();if(y&&!i)throw y;return d()}}}),u?Bs(()=>x(!1)):x(!1),[_,{refetch:x,mutate:v}]}function mo(t){return te(t,!1)}function J(t){if(L===null)return t();const e=L;L=null;try{return t()}finally{L=e}}function dc(t,e,s){const n=Array.isArray(t);let r,o=s&&s.defer;return i=>{let a;if(n){a=Array(t.length);for(let l=0;l<t.length;l++)a[l]=t[l]()}else a=t();if(o)return o=!1,i;const c=J(()=>e(a,r,i));return r=a,c}}function gc(t){ho(()=>J(t))}function Do(t){return T===null||(T.cleanups===null?T.cleanups=[t]:T.cleanups.push(t)),t}function Zt(){return L}function mc(){return T}function Dc(t,e){const s=T,n=L;T=t,L=null;try{return te(e,!0)}catch(r){Ds(r)}finally{T=s,L=n}}function po(t){const e=L,s=T;return Promise.resolve().then(()=>{L=e,T=s;let n;return te(t,!1),L=T=null,n?n.done:void 0})}const[fo,pc]=re(!1);function fc(){return[fo,po]}function vc(t,e){const s=Symbol("context");return{id:s,Provider:Eo(s),defaultValue:t}}function Fc(t){return T&&T.context&&T.context[t.id]!==void 0?T.context[t.id]:t.defaultValue}function vo(t){const e=le(t),s=le(()=>Xt(e()));return s.toArray=()=>{const n=s();return Array.isArray(n)?n:n!=null?[n]:[]},s}let Fo;function An(){if(this.sources&&this.state)if(this.state===ae)be(this);else{const t=W;W=null,te(()=>pt(this),!1),W=t}if(L){const t=this.observers?this.observers.length:0;L.sources?(L.sources.push(this),L.sourceSlots.push(t)):(L.sources=[this],L.sourceSlots=[t]),this.observers?(this.observers.push(L),this.observerSlots.push(L.sources.length-1)):(this.observers=[L],this.observerSlots=[L.sources.length-1])}return this.value}function Cn(t,e,s){let n=t.value;return(!t.comparator||!t.comparator(n,e))&&(t.value=e,t.observers&&t.observers.length&&te(()=>{for(let r=0;r<t.observers.length;r+=1){const o=t.observers[r],i=Ot&&Ot.running;i&&Ot.disposed.has(o),(i?!o.tState:!o.state)&&(o.pure?W.push(o):oe.push(o),o.observers&&Sn(o)),i||(o.state=ae)}if(W.length>1e6)throw W=[],new Error},!1)),e}function be(t){if(!t.fn)return;Ct(t);const e=At;yo(t,t.value,e)}function yo(t,e,s){let n;const r=T,o=L;L=T=t;try{n=t.fn(e)}catch(i){return t.pure&&(t.state=ae,t.owned&&t.owned.forEach(Ct),t.owned=null),t.updatedAt=s+1,Ds(i)}finally{L=o,T=r}(!t.updatedAt||t.updatedAt<=s)&&(t.updatedAt!=null&&"observers"in t?Cn(t,n):t.value=n,t.updatedAt=s)}function Ge(t,e,s,n=ae,r){const o={fn:t,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:T,context:T?T.context:null,pure:s};return T===null||T!==En&&(T.owned?T.owned.push(o):T.owned=[o]),o}function Dt(t){if(t.state===0)return;if(t.state===mt)return pt(t);if(t.suspense&&J(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<At);)t.state&&e.push(t);for(let s=e.length-1;s>=0;s--)if(t=e[s],t.state===ae)be(t);else if(t.state===mt){const n=W;W=null,te(()=>pt(t,e[0]),!1),W=n}}function te(t,e){if(W)return t();let s=!1;e||(W=[]),oe?s=!0:oe=[],At++;try{const n=t();return bo(s),n}catch(n){s||(oe=null),W=null,Ds(n)}}function bo(t){if(W&&(kn(W),W=null),t)return;const e=oe;oe=null,e.length&&te(()=>wn(e),!1)}function kn(t){for(let e=0;e<t.length;e++)Dt(t[e])}function wo(t){let e,s=0;for(e=0;e<t.length;e++){const n=t[e];n.user?t[s++]=n:Dt(n)}for(e=0;e<s;e++)Dt(t[e])}function pt(t,e){t.state=0;for(let s=0;s<t.sources.length;s+=1){const n=t.sources[s];if(n.sources){const r=n.state;r===ae?n!==e&&(!n.updatedAt||n.updatedAt<At)&&Dt(n):r===mt&&pt(n,e)}}}function Sn(t){for(let e=0;e<t.observers.length;e+=1){const s=t.observers[e];s.state||(s.state=mt,s.pure?W.push(s):oe.push(s),s.observers&&Sn(s))}}function Ct(t){let e;if(t.sources)for(;t.sources.length;){const s=t.sources.pop(),n=t.sourceSlots.pop(),r=s.observers;if(r&&r.length){const o=r.pop(),i=s.observerSlots.pop();n<r.length&&(o.sourceSlots[i]=n,r[n]=o,s.observerSlots[n]=i)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)Ct(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Pn(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Ds(t,e=T){const s=Pn(t);{console.error("solid error",s);return}}function Xt(t){if(typeof t=="function"&&!t.length)return Xt(t());if(Array.isArray(t)){const e=[];for(let s=0;s<t.length;s++){const n=Xt(t[s]);Array.isArray(n)?e.push.apply(e,n):e.push(n)}return e}return t}function Eo(t,e){return function(s){let n;return lo(()=>n=J(()=>(T.context={...T.context,[t]:s.value},vo(()=>s.children))),void 0),n}}const Ao=Symbol("fallback");function Os(t){for(let e=0;e<t.length;e++)t[e]()}function Co(t,e,s={}){let n=[],r=[],o=[],i=0,a=e.length>1?[]:null;return Do(()=>Os(o)),()=>{let c=t()||[],l,u;return c[Kt],J(()=>{let d=c.length,v,w,p,f,k,A,P,C,F;if(d===0)i!==0&&(Os(o),o=[],n=[],r=[],i=0,a&&(a=[])),s.fallback&&(n=[Ao],r[0]=rt(_=>(o[0]=_,s.fallback())),i=1);else if(i===0){for(r=new Array(d),u=0;u<d;u++)n[u]=c[u],r[u]=rt(h);i=d}else{for(p=new Array(d),f=new Array(d),a&&(k=new Array(d)),A=0,P=Math.min(i,d);A<P&&n[A]===c[A];A++);for(P=i-1,C=d-1;P>=A&&C>=A&&n[P]===c[C];P--,C--)p[C]=r[P],f[C]=o[P],a&&(k[C]=a[P]);for(v=new Map,w=new Array(C+1),u=C;u>=A;u--)F=c[u],l=v.get(F),w[u]=l===void 0?-1:l,v.set(F,u);for(l=A;l<=P;l++)F=n[l],u=v.get(F),u!==void 0&&u!==-1?(p[u]=r[l],f[u]=o[l],a&&(k[u]=a[l]),u=w[u],v.set(F,u)):o[l]();for(u=A;u<d;u++)u in p?(r[u]=p[u],o[u]=f[u],a&&(a[u]=k[u],a[u](u))):r[u]=rt(h);r=r.slice(0,i=d),n=c.slice(0)}return r});function h(d){if(o[u]=d,a){const[v,w]=re(u);return a[u]=w,e(c[u],v)}return e(c[u])}}}function yc(t,e){return J(()=>t(e||{}))}function Ke(){return!0}const Qt={get(t,e,s){return e===X?s:t.get(e)},has(t,e){return e===X?!0:t.has(e)},set:Ke,deleteProperty:Ke,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:Ke,deleteProperty:Ke}},ownKeys(t){return t.keys()}};function Rt(t){return(t=typeof t=="function"?t():t)?t:{}}function ko(){for(let t=0,e=this.length;t<e;++t){const s=this[t]();if(s!==void 0)return s}}function bc(...t){let e=!1;for(let i=0;i<t.length;i++){const a=t[i];e=e||!!a&&X in a,t[i]=typeof a=="function"?(e=!0,le(a)):a}if(e)return new Proxy({get(i){for(let a=t.length-1;a>=0;a--){const c=Rt(t[a])[i];if(c!==void 0)return c}},has(i){for(let a=t.length-1;a>=0;a--)if(i in Rt(t[a]))return!0;return!1},keys(){const i=[];for(let a=0;a<t.length;a++)i.push(...Object.keys(Rt(t[a])));return[...new Set(i)]}},Qt);const s={},n=Object.create(null);for(let i=t.length-1;i>=0;i--){const a=t[i];if(!a)continue;const c=Object.getOwnPropertyNames(a);for(let l=c.length-1;l>=0;l--){const u=c[l];if(u==="__proto__"||u==="constructor")continue;const h=Object.getOwnPropertyDescriptor(a,u);if(!n[u])n[u]=h.get?{enumerable:!0,configurable:!0,get:ko.bind(s[u]=[h.get.bind(a)])}:h.value!==void 0?h:void 0;else{const d=s[u];d&&(h.get?d.push(h.get.bind(a)):h.value!==void 0&&d.push(()=>h.value))}}}const r={},o=Object.keys(n);for(let i=o.length-1;i>=0;i--){const a=o[i],c=n[a];c&&c.get?Object.defineProperty(r,a,c):r[a]=c?c.value:void 0}return r}function wc(t,...e){if(X in t){const r=new Set(e.length>1?e.flat():e[0]),o=e.map(i=>new Proxy({get(a){return i.includes(a)?t[a]:void 0},has(a){return i.includes(a)&&a in t},keys(){return i.filter(a=>a in t)}},Qt));return o.push(new Proxy({get(i){return r.has(i)?void 0:t[i]},has(i){return r.has(i)?!1:i in t},keys(){return Object.keys(t).filter(i=>!r.has(i))}},Qt)),o}const s={},n=e.map(()=>({}));for(const r of Object.getOwnPropertyNames(t)){const o=Object.getOwnPropertyDescriptor(t,r),i=!o.get&&!o.set&&o.enumerable&&o.writable&&o.configurable;let a=!1,c=0;for(const l of e)l.includes(r)&&(a=!0,i?n[c][r]=o.value:Object.defineProperty(n[c],r,o)),++c;a||(i?s[r]=o.value:Object.defineProperty(s,r,o))}return[...n,s]}const So=t=>`Stale read from <${t}>.`;function Ec(t){const e="fallback"in t&&{fallback:()=>t.fallback};return le(Co(()=>t.each,t.children,e||void 0))}function Ac(t){const e=t.keyed,s=le(()=>t.when,void 0,{equals:(n,r)=>e?n===r:!n==!r});return le(()=>{const n=s();if(n){const r=t.children;return typeof r=="function"&&r.length>0?J(()=>r(e?n:()=>{if(!J(s))throw So("Show");return t.when})):r}return t.fallback},void 0,void 0)}const Cc={messageActionChatCreate:"ActionCreateGroup",messageActionChatCreateYou:"ActionYouCreateGroup",messageActionChatEditTitle:"ActionChangedTitle",messageActionChatEditPhoto:"ActionChangedPhoto",messageActionChatEditVideo:"ActionChangedVideo",messageActionChatDeletePhoto:"ActionRemovedPhoto",messageActionChatReturn:"ActionAddUserSelf",messageActionChatReturnYou:"ActionAddUserSelfYou",messageActionChatJoined:"ActionAddUserSelfMega",messageActionChatJoinedYou:"ChannelMegaJoined",messageActionChatAddUser:"ActionAddUser",messageActionChatAddUsers:"ActionAddUser",messageActionChatLeave:"ActionLeftUser",messageActionChatLeaveYou:"YouLeft",messageActionChatDeleteUser:"ActionKickUser",messageActionChatJoinedByLink:"ActionInviteUser",messageActionPinMessage:"Chat.Service.Group.UpdatedPinnedMessage",messageActionContactSignUp:"Chat.Service.PeerJoinedTelegram",messageActionChannelCreate:"ActionCreateChannel",messageActionChannelEditTitle:"Chat.Service.Channel.UpdatedTitle",messageActionChannelEditPhoto:"Chat.Service.Channel.UpdatedPhoto",messageActionChannelEditVideo:"Chat.Service.Channel.UpdatedVideo",messageActionChannelDeletePhoto:"Chat.Service.Channel.RemovedPhoto",messageActionHistoryClear:"HistoryCleared",messageActionDiscussionStarted:"DiscussionStarted",messageActionGiveawayLaunch:"BoostingGiveawayJustStarted",messageActionChannelJoined:"ChannelJoined",messageActionChannelMigrateFrom:"ActionMigrateFromGroup","messageActionPhoneCall.video_in_ok":"ChatList.Service.VideoCall.incoming","messageActionPhoneCall.video_out_ok":"ChatList.Service.VideoCall.outgoing","messageActionPhoneCall.video_missed":"ChatList.Service.VideoCall.Missed","messageActionPhoneCall.video_cancelled":"ChatList.Service.VideoCall.Cancelled","messageActionPhoneCall.in_ok":"ChatList.Service.Call.incoming","messageActionPhoneCall.out_ok":"ChatList.Service.Call.outgoing","messageActionPhoneCall.missed":"ChatList.Service.Call.Missed","messageActionPhoneCall.cancelled":"ChatList.Service.Call.Cancelled","messageActionGroupCall.started":"Chat.Service.VoiceChatStarted.Channel","messageActionGroupCall.started_by":"Chat.Service.VoiceChatStarted","messageActionGroupCall.started_byYou":"Chat.Service.VoiceChatStartedYou","messageActionGroupCall.ended":"Chat.Service.VoiceChatFinished.Channel","messageActionGroupCall.ended_by":"Chat.Service.VoiceChatFinished","messageActionGroupCall.ended_byYou":"Chat.Service.VoiceChatFinishedYou",messageActionBotAllowed:"Chat.Service.BotPermissionAllowed"},kc=ie?"Message.Unsupported.Mobile":"Message.Unsupported.Desktop";var he;(t=>{t.strings=new Map,t.countriesList=[];let e,s;t.requestedServerLanguage=!1,t.isRTL=!1,[t.langCodeNormalized,t.setLangCodeNormalized]=re();function n(g){t.isRTL=g}t.setRTL=n;function r(g){t.lastRequestedLangCode=g,t.lastRequestedNormalizedLangCode=g.split("-")[0],(0,t.setLangCodeNormalized)(t.lastRequestedNormalizedLangCode.split("-")[0])}function o(){return s||(s=Promise.all([Ce.get("langPack"),t.polyfillPromise]).then(([g])=>g?(t.lastRequestedLangCode||r(g.lang_code),w(g),g):c()).finally(()=>{s=void 0}))}t.getCacheLangPack=o;function i(){if(t.timeFormat==="h12")try{const g=F({hour:"numeric",minute:"numeric",hour12:!0}),m=new Date;m.setHours(0);const D=g.format(m);t.amPmCache.am=D.split(/\s/)[1],m.setHours(12);const E=g.format(m);t.amPmCache.pm=E.split(/\s/)[1]}catch(g){console.error("cannot get am/pm",g),t.amPmCache={am:"AM",pm:"PM"}}}function a(g,m=!!t.timeFormat&&t.timeFormat!==g){t.timeFormat=g,i(),m&&(C.clear(),Array.from(document.querySelectorAll(".i18n")).forEach(D=>{const E=t.weakMap.get(D);E instanceof _&&E.update()}))}t.setTimeFormat=a;function c(){const g=j.langPackCode;return r(g),Promise.all([z(()=>Y(()=>import("./lang-Ypi2hp9u-Ypi2hp9u.js"),[]),[],import.meta.url),z(()=>Y(()=>import("./langSign-CN-ja8rh-CN-ja8rh.js"),[]),[],import.meta.url),z(()=>Y(()=>import("./countries-CzeCvYH8-CzeCvYH8.js"),[]),[],import.meta.url)]).then(([m,D,E])=>{const B=[];h(m.default,B),h(D.default,B);const G={_:"langPackDifference",from_version:0,lang_code:g,strings:B,version:0,local:!0,countries:E.default};return v(G)})}t.loadLocalLangPack=c;function l(g,m){m=!0,t.requestedServerLanguage=!0;const D=b.managers;return Promise.all([D.apiManager.invokeApiCacheable("langpack.getLangPack",{lang_code:g,lang_pack:m?"web":j.langPack}),!m&&D.apiManager.invokeApiCacheable("langpack.getLangPack",{lang_code:g,lang_pack:"android"}),z(()=>Y(()=>import("./lang-Ypi2hp9u-Ypi2hp9u.js"),[]),[],import.meta.url),z(()=>Y(()=>import("./langSign-CN-ja8rh-CN-ja8rh.js"),[]),[],import.meta.url),D.apiManager.invokeApiCacheable("help.getCountriesList",{lang_code:g,hash:0}),t.polyfillPromise])}t.loadLangPack=l;function u(g,m){return b.managers.apiManager.invokeApi("langpack.getStrings",{lang_pack:j.langPack,lang_code:g,keys:m})}t.getStrings=u;function h(g,m=[]){for(const D in g){const E=g[D];typeof E=="string"?m.push({_:"langPackString",key:D,value:E}):m.push({_:"langPackStringPluralized",key:D,...E})}return m}t.formatLocalStrings=h;function d(g,m){return r(g),l(g,m).then(([D,E,B,G,R,ge])=>{let we=[];return[B,G].forEach(kt=>{h(kt.default,we)}),we=we.concat(...[D.strings,E.strings].filter(Boolean)),D.strings=we,D.countries=R,v(D)})}t.getLangPack=d;function v(g){return g.appVersion=j.langPackVersion,Ce.set({langPack:g}).then(()=>(w(g),g))}t.saveLangPack=v,t.polyfillPromise=function(){return typeof Intl<"u"&&typeof Intl.PluralRules<"u"?Promise.resolve():z(()=>Y(()=>import("./pluralPolyfill-B0qpVVRH-DH9iDR0J.js"),[]),[],import.meta.url).then(g=>{window.Intl=Object.assign(typeof Intl<"u"?Intl:{},g.default)})}();function w(g){const m=t.lastRequestedLangCode;if(g.lang_code===m){try{e=new Intl.PluralRules(t.lastRequestedNormalizedLangCode)}catch(D){console.error("pluralRules error",D),e=new Intl.PluralRules(t.lastRequestedNormalizedLangCode.split("-",1)[0])}try{e=new Intl.PluralRules(g.lang_code)}catch(D){console.error("pluralRules error",D),e=new Intl.PluralRules(g.lang_code.split("-",1)[0])}t.strings.clear();for(const D of g.strings)t.strings.set(D.key,D);g.countries&&(t.countriesList.length=0,t.countriesList.push(...g.countries.countries),g.countries.countries.forEach(D=>{if(D.name){const E=D.default_name;t.strings.set(E,{_:"langPackString",key:E,value:D.name})}})),t.lastAppliedLangCode!==m&&(t.lastAppliedLangCode&&b.myId&&(b.managers.appReactionsManager.resetAvailableReactions(),b.managers.appUsersManager.indexMyself(),b.managers.dialogsStorage.indexMyDialog()),t.lastAppliedLangCode=m,C.clear(),i(),b.dispatchEvent("language_change",m)),Array.from(document.querySelectorAll(".i18n")).forEach(D=>{const E=t.weakMap.get(D);E&&E.update()})}}t.applyLangPack=w;function p(g,m,D,E){const B=m[E===void 0?D.i++:E];Array.isArray(B)?g.push(...B):g.push(B)}function f(g,m,D){if(!D){D={i:0};const R=g.match(/(%|un)\d+/g);R!=null&&R.length&&(D.i=Math.max(...R.map(ge=>+ge.replace(/\D/g,""))))}const E=[],B=/(\*\*|__)(.+?)\1|(\n)|(\[.+?\]\(.*?\))|un\d|%\d\$.|%\S/g;let G=0;return g.replace(B,(R,ge,we,kt,Te,St,fr)=>{if(St>G&&E.push(fr.slice(G,St)),ge){let K;switch(ge){case"**":{K=document.createElement("b");break}case"__":{K=document.createElement("i");break}}K.append(...f(we,m,D)),E.push(K)}else if(kt)E.push(document.createElement("br"));else if(Te){const K=Te.lastIndexOf("]"),vr=Te.slice(1,K),Pt=Te.slice(K+2,Te.length-1);let H;if(Pt&&fn(Pt)){H=document.createElement("a");const _t=yn(Pt);H.href=_t.url,_t.onclick&&H.setAttribute("onclick",_t.onclick+"(this)"),co(H)}else H=m[D.i++],H instanceof DocumentFragment&&(H=H.firstChild),typeof H!="string"&&(H.textContent="");const As=f(vr,m,D);typeof H=="string"?E.push(...As):(H.append(...As),E.push(H))}else if(m){const K=R.replace(/\D/g,"");p(E,m,D,!K||Number.isNaN(+K)?void 0:Math.min(m.length-1,+K-1))}return G=St+R.length,""}),G!==g.length&&E.push(g.slice(G)),E}t.superFormatter=f;function k(g,m=!1,D){const E=t.strings.get(g);let B;if(E)if(E._==="langPackStringPluralized"&&(D!=null&&D.length)){let R=D[0];typeof R=="string"&&(R=+R.replace(/\D/g,""));const ge=e.select(R);B=E[ge+"_value"]||E.other_value}else E._==="langPackString"?B=E.value:B=g;else B=g;const G=f(B,D);return m?G.map(R=>R instanceof Node?R.textContent:R).join(""):G}t.format=k,t.weakMap=new WeakMap;class A{constructor(m){this.element=(m==null?void 0:m.element)||document.createElement("span"),this.element.classList.add("i18n"),this.property=m==null?void 0:m.property,t.weakMap.set(this.element,this)}}class P extends A{constructor(m={}){super({...m,property:m.property??"innerHTML"}),m!=null&&m.key&&this.update(m)}update(m){var D;if(Gt(this,m),this.property==="innerHTML")this.element.replaceChildren(...k(this.key,!1,this.args)),(D=this.args)!=null&&D.length&&this.element.normalize();else{const E=this.element[this.property],B=k(this.key,!0,this.args);E===void 0?this.element.dataset[this.property]=B:this.element[this.property]=B}}compareAndUpdate(m){if(!(this.key===m.key&&pn(this.args,m.args)))return this.update(m)}}t.IntlElement=P;const C=new Map;function F(g={}){const m=JSON.stringify(g);let D=C.get(m);return D||(D=new Intl.DateTimeFormat(t.lastRequestedNormalizedLangCode+"-u-hc-"+t.timeFormat,g),C.set(m,D)),D}t.getDateTimeFormat=F,t.amPmCache={am:"AM",pm:"PM"};class _ extends A{constructor(m){super({...m,property:m.property??"textContent"}),bn(this.element),m!=null&&m.date&&this.update(m)}update(m){Gt(this,m);let D;if(this.options.hour&&this.options.minute&&Object.keys(this.options).length===2){const E=this.date.getHours();D=("0"+(t.timeFormat==="h12"?E%12||12:E)).slice(-2)+":"+("0"+this.date.getMinutes()).slice(-2),t.timeFormat==="h12"&&(D+=" "+(E<12?t.amPmCache.am:t.amPmCache.pm))}else{const E=F(this.options);D=Et(E.format(this.date))}this.element[this.property]=D}}t.IntlDateElement=_;function x(g,m){return new P({key:g,args:m}).element}t.i18n=x;function y(g){return new P(g).element}t.i18n_=y;function M(g,m,D,E){return new P({element:g,key:m,args:D,property:E}).element}t._i18n=M})(he||(he={}));const N=he,We=he.i18n,Sc=he.i18n_,Pc=he._i18n;function Po(t,e){const s=t.slice(0,1);for(let n=1;n<t.length;++n){const r=t.length-1===n;s.push(typeof e=="function"?e(r):e),s.push(t[n])}return s}function _c(t,e=!0,s){const n=Po(t,r=>{const o=r&&e?"AutoDownloadSettings.LastDelimeter":"AutoDownloadSettings.Delimeter";return s?he.format(o,!0):We(o)});return s?n.join(""):n}S&&(S.I18n=he);function _o(t){return+t<0}function To(t){return+t>=0}String.prototype.toUserId=function(){return(+this).toUserId()};String.prototype.toChatId=function(){return(+this).toChatId()};String.prototype.toPeerId=function(t){return(+this).toPeerId(t)};String.prototype.isPeerId=function(){return/^[\d-]/.test(this.toString())};Number.prototype.toUserId=function(){return+this};Number.prototype.toChatId=function(){return Math.abs(this)};Number.prototype.toPeerId=function(t){return t===void 0?+this:t?-Math.abs(this):+this};Number.prototype.isPeerId=function(){return!0};[["isUser",To],["isAnyChat",_o]].forEach(t=>{const e=Array.isArray(t)?t[0]:t,s=Array.isArray(t)?t[1]:t;String.prototype[e]=function(){return s.call(null,this.toString())},Number.prototype[e]=function(){return s.call(null,+this)}});function Io(...t){const e=t.reduce((r,o)=>r+(o.byteLength||o.length),0),s=new Uint8Array(e);let n=0;return t.forEach(r=>{s.set(r instanceof ArrayBuffer?new Uint8Array(r):r,n),n+=r.byteLength||r.length}),s}Uint8Array.prototype.concat=function(...t){return Io(this,...t)};Uint8Array.prototype.toJSON=function(){return[...this]};Promise.prototype.finally=Promise.prototype.finally||function(t){const e=s=>Promise.resolve(t()).then(s);return this.then(s=>e(()=>s),s=>e(()=>Promise.reject(s)))};class Mo{constructor(){this.convertPromises={}}init(){this.worker=new Worker(new URL(""+new URL("/assets/webp.worker-CJXTr_cK-DN87CC_-.js",import.meta.url).href,import.meta.url),{type:"module"}),this.worker.addEventListener("message",e=>{const s=e.data.payload,n=this.convertPromises[s.fileName];n&&(s.bytes?n.resolve(s.bytes):n.reject(),delete this.convertPromises[s.fileName])})}postMessage(e){this.init&&(this.init(),this.init=null),this.worker.postMessage(e)}convert(e,s){if(this.convertPromises.hasOwnProperty(e))return this.convertPromises[e];const n=ne();return this.postMessage({type:"convertWebp",payload:{fileName:e,bytes:s}}),this.convertPromises[e]=n}}const _n=new Mo;S.webpWorkerController=_n;class Lo{constructor(){this.prefix="",this.cache={},this.useStorage=!0,$.test&&(this.prefix="t_")}get(e,s=!0){if(this.cache.hasOwnProperty(e)&&s)return this.cache[e];if(this.useStorage){let n;try{n=localStorage.getItem(this.prefix+e)}catch{throw this.useStorage=!1,fe("STORAGE_OFFLINE")}if(n!==null)try{n=JSON.parse(n)}catch{}else n=void 0;return n}else throw fe("STORAGE_OFFLINE")}set(e,s=!1){let n;for(const r in e)if(e.hasOwnProperty(r)){const o=e[r];if(this.cache[r]=o,!s)try{if(!this.useStorage)throw fe("STORAGE_OFFLINE");const i=JSON.stringify(o);localStorage.setItem(this.prefix+r,i)}catch(i){this.useStorage=!1,n=i}}if(n)throw n}delete(e,s=!1){e=""+e,s||delete this.cache[e];try{localStorage.removeItem(this.prefix+e)}catch{}}clear(){const e=["dc","server_time_offset","xt_instance","user_auth","state_id","k_build"];for(let s=1;s<=5;++s)e.push(`dc${s}_server_salt`),e.push(`dc${s}_auth_key`),e.push(`dc${s}_hash`);for(const s of e)this.delete(s,!0)}toggleStorage(e,s){if(this.useStorage=e,!!s)if(!e)this.clear();else return this.set(this.cache)}}const Tn=class In{constructor(){In.STORAGES.push(this),ve||(this.storage=new Lo)}async proxy(e,...s){return ve?$e.getInstance().invoke("localStorageProxy",{type:e,args:s}):(s=Array.prototype.slice.call(s),this.storage[e].apply(this.storage,s))}get(e,s){return this.proxy("get",e,s)}set(e,s){return this.proxy("set",e,s)}delete(e,s){return this.proxy("delete",e,s)}clear(){return this.proxy("clear")}toggleStorage(e,s){return this.proxy("toggleStorage",e,s)}};Tn.STORAGES=[];let xo=Tn;const O=new xo;S.appStorage=O;function Bo(t){return He&&t instanceof TouchEvent&&t.touches[0].clientX<30}class Oo{constructor(){if(this.onPopState=e=>{const s=window.location.hash,n=e.state;if(this.debug&&this.log("popstate",e,this.isPossibleSwipe,s),s!==this.currentHash)if(this.debug&&this.log.warn(`hash changed, new=${s}, current=${this.currentHash}, overridden=${this.overriddenHash}`),n===this.id&&this.overriddenHash&&this.overriddenHash!==s)this.overrideHash(this.overriddenHash);else if(n&&!this.overriddenHash&&s)this.overrideHash();else{this.currentHash=s,this.onHashChange&&this.onHashChange();return}if(n!==this.id&&(this.pushState(),!this.navigations.length))return;const r=this.navigations.pop();if(!r){this.pushState();return}this.manual=!this.isPossibleSwipe,this.handleItem(r,this.navigations.length)},this.onKeyDown=e=>{const s=this.navigations[this.navigations.length-1];s&&e.key==="Escape"&&(!s.onEscape||s.onEscape())&&(Vt(e),this.back(s.type))},this.onTouchStart=e=>{e.touches.length>1||(this.debug&&this.log("touchstart"),Bo(e)&&(this.isPossibleSwipe=!0,window.addEventListener("touchend",()=>{setTimeout(()=>{this.isPossibleSwipe=!1},100)},{passive:!0,once:!0})))},this.navigations=[],this.id=Date.now(),this.manual=!1,this.log=ee("NC"),this.debug=!0,this.currentHash=window.location.hash,this.overriddenHash="",this.isPossibleSwipe=!1,window.addEventListener("popstate",this.onPopState),window.addEventListener("keydown",this.onKeyDown,{capture:!0,passive:!1}),He){const e={passive:!0};window.addEventListener("touchstart",this.onTouchStart,e)}history.scrollRestoration="manual",this.pushState()}overrideHash(e=""){e&&e[0]!=="#"?e="#"+e:e==="#"&&(e=""),this.currentHash!==e&&(this.overriddenHash=this.currentHash=e,this.replaceState(),this.pushState())}handleItem(e,s=this.navigations.indexOf(e)){const n=e.onPop(this.manual?void 0:!1);this.debug&&this.log("popstate, navigation:",e,this.navigations),n===!1?this.spliceItems(Math.min(this.navigations.length,s),0,e):e.noBlurOnPop||sn(),this.manual=!1}findItemByType(e){for(let s=this.navigations.length-1;s>=0;--s){const n=this.navigations[s];if(n.type===e)return{item:n,index:s}}}back(e){if(e){const s=this.findItemByType(e);if(s){this.backByItem(s.item,s.index);return}}history.back()}backByItem(e,s=this.navigations.indexOf(e)){s!==-1&&(this.manual=!0,this.navigations.splice(s,1),this.handleItem(e,s))}onItemAdded(e){this.debug&&this.log("onItemAdded",e,this.navigations),e.noHistory||this.pushState()}pushItem(e){this.navigations.push(e),this.onItemAdded(e)}unshiftItem(e){this.navigations.unshift(e),this.onItemAdded(e)}spliceItems(e,s,...n){this.navigations.splice(e,s,...n),n.forEach(r=>{this.onItemAdded(r)})}pushState(){this.debug&&this.log("push"),this.manual=!1,history.pushState(this.id,"")}replaceState(){this.debug&&this.log.warn("replace");const e=location.origin+location.pathname+location.search+this.overriddenHash;history.replaceState(this.id,"",e)}removeItem(e){e&&st(this.navigations,e)}removeByType(e,s=!1){for(let n=this.navigations.length-1;n>=0&&!(this.navigations[n].type===e&&(this.navigations.splice(n,1),s));--n);}}const es=new Oo;S.appNavigationController=es;class Ro{reload(){try{es.spliceItems(0,1/0),es.overrideHash(),location.reload()}catch{}}close(){try{window.close()}catch{}}focus(){window.focus()}}const Mn=new Ro;function U(t){if(t===null||typeof t!="object")return t;if(t instanceof Date)return new Date(t.getTime());if(Array.isArray(t))return t.map(n=>U(n));if(ArrayBuffer.isView(t))return t.slice();const e=new t.constructor;for(var s in t)t.hasOwnProperty(s)&&(e[s]=U(t[s]));return e}const ft=typeof SharedWorker<"u"&&!$.noSharedWorker,jo=pe?"touchstart":"mousemove";class No extends ye{constructor(){super(),this._isIdle=!0,this.focusPromise=Promise.resolve(),this.focusResolve=()=>{},window.addEventListener("blur",()=>{this.isIdle=!0,window.addEventListener("focus",()=>{this.isIdle=!1},{once:!0})}),window.addEventListener(jo,()=>{this.isIdle=!1},{once:!0,passive:!0}),this.addEventListener("change",e=>{e?this.focusPromise=new Promise(s=>{this.focusResolve=s}):this.focusResolve()})}getFocusPromise(){return this.focusPromise}get isIdle(){return this._isIdle}set isIdle(e){this._isIdle!==e&&(this._isIdle=e,this.dispatchEvent("change",e))}}const vt=new No,Wo=5e3,Uo=3e4,zo=2e4,Vo=ft;class Ho extends ye{constructor(){super(!1),this.log=ee("INSTANCE"),this.clearInstance=()=>{this.masterInstance&&!this.deactivated&&(this.log.warn("clear master instance"),O.delete("xt_instance"))},this.checkInstance=async(e=vt.isIdle)=>{if(this.deactivated)return;const s=Date.now(),n={id:this.instanceId,idle:e,time:s},[r,o=j.build]=await Promise.all([O.get("xt_instance",!1),O.get("k_build",!1)]);if(o>j.build){this.masterInstance=!1,b.managers.networkerFactory.stopAll(),this.deactivateInstance("version"),qe.toggleStorages(!1,!1);return}else if(Vo){O.set({xt_instance:n});return}!e||!r||r.id===this.instanceId||r.time<s-zo?(O.set({xt_instance:n}),this.masterInstance||(this.masterInstance=!0,b.managers.networkerFactory.startAll(),this.log.warn("now master instance",n)),this.clearDeactivateTimeout()):this.masterInstance&&(this.masterInstance=!1,b.managers.networkerFactory.stopAll(),this.log.warn("now idle instance",n),this.deactivateTimeout||(this.deactivateTimeout=window.setTimeout(()=>this.deactivateInstance("tabs"),Uo)))},this.log=ee("INSTANCE"),this.instanceId=hn}get deactivatedReason(){return this.deactivated}start(){if(this.reset(),!this.started){this.started=!0,vt.addEventListener("change",this.checkInstance),setInterval(this.checkInstance,Wo),this.checkInstance();try{document.documentElement.addEventListener("beforeunload",this.clearInstance)}catch{}}}reset(){this.masterInstance=!1,this.clearDeactivateTimeout(),this.deactivated=void 0}activateInstance(){this.deactivated&&(this.reset(),this.checkInstance(!1),this.dispatchEvent("activated"))}deactivateInstance(e){this.masterInstance||this.deactivated||(this.log.warn("deactivate",e),this.clearDeactivateTimeout(),this.deactivated=e,this.dispatchEvent("deactivated",e))}clearDeactivateTimeout(){this.deactivateTimeout&&(clearTimeout(this.deactivateTimeout),this.deactivateTimeout=0)}}const Ft=new Ho;S&&(S.singleInstance=Ft);function Yo(t,e){if(t!==void 0)return t=+t.toFixed(0),e?t<ht?t:t%ht:t}function $o(t){return Yo(t,!0)}const Go=1e4;class Ln extends ye{constructor(){super(!1),this.isAvailable=!0,this.isPushEnabled=!1,this.localNotificationsAvailable=!0,this.started=!1,this.settings={},this.isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,this.userVisibleOnly=!this.isFirefox,this.log=ee("PUSH-API"),this.subscribe=()=>{this.isAvailable&&navigator.serviceWorker.ready.then(e=>{e.pushManager.subscribe({userVisibleOnly:this.userVisibleOnly}).then(s=>{this.isPushEnabled=!0,this.pushSubscriptionNotify("subscribe",s)}).catch(s=>{Notification.permission==="denied"?this.log("Permission for Notifications was denied"):(this.log("Unable to subscribe to push.",s),this.userVisibleOnly||(this.userVisibleOnly=!0,setTimeout(this.subscribe,0)))})})},this.isAliveNotify=()=>{if(!this.isAvailable||Ft.deactivatedReason)return;this.settings.baseUrl=(location.href||"").replace(/#.*$/,"");const e={},s={push_action_mute1d:ie?"PushNotification.Action.Mute1d.Mobile":"PushNotification.Action.Mute1d",push_action_settings:ie?"PushNotification.Action.Settings.Mobile":"PushNotification.Action.Settings",push_message_nopreview:"PushNotification.Message.NoPreview"};for(const n in s)e[n]=N.format(s[n],!0);this.serviceMessagePort.invokeVoid("pushPing",{localNotifications:this.localNotificationsAvailable,lang:e,settings:this.settings}),this.isAliveTO=setTimeout(this.isAliveNotify,Go)},(!("PushManager"in window)||!("Notification"in window)||!("serviceWorker"in navigator))&&(this.log.warn("Push messaging is not supported."),this.isAvailable=!1,this.localNotificationsAvailable=!1),this.isAvailable&&Notification.permission==="denied"&&this.log.warn("The user has blocked notifications.")}start(){this.started||(this.started=!0,this.getSubscription(),this.setUpServiceWorkerChannel())}setLocalNotificationsDisabled(){this.localNotificationsAvailable=!1}getSubscription(){this.isAvailable&&navigator.serviceWorker.ready.then(e=>{e.pushManager.getSubscription().then(s=>{this.isPushEnabled=!!s,this.pushSubscriptionNotify("init",s)}).catch(s=>{this.log.error("Error during getSubscription()",s)})})}unsubscribe(){this.isAvailable&&navigator.serviceWorker.ready.then(e=>{e.pushManager.getSubscription().then(s=>{this.isPushEnabled=!1,s&&(this.pushSubscriptionNotify("unsubscribe",s),setTimeout(()=>{s.unsubscribe().then(n=>{this.isPushEnabled=!1}).catch(n=>{this.log.error("Unsubscription error: ",n)})},3e3))}).catch(s=>{this.log.error("Error thrown while unsubscribing from push messaging.",s)})})}forceUnsubscribe(){this.isAvailable&&navigator.serviceWorker.ready.then(e=>{e.pushManager.getSubscription().then(s=>{this.log.warn("force unsubscribe",s),s&&s.unsubscribe().then(n=>{this.log.warn("force unsubscribe successful",n),this.isPushEnabled=!1}).catch(n=>{this.log.error("Unsubscription error: ",n)})}).catch(s=>{this.log.error("Error thrown while unsubscribing from push messaging.",s)})})}setSettings(e){this.settings=U(e),clearTimeout(this.isAliveTO),this.isAliveNotify()}hidePushNotifications(){this.isAvailable&&this.serviceMessagePort.invokeVoid("notificationsClear",void 0)}setUpServiceWorkerChannel(){this.isAvailable&&(this.serviceMessagePort.addEventListener("pushClick",e=>{if(Ft.deactivatedReason){Mn.reload();return}this.dispatchEvent("push_notification_click",e)}),navigator.serviceWorker.ready.then(this.isAliveNotify))}pushSubscriptionNotify(e,s){if(s){const n=s.toJSON();if(!n||!n.endpoint||!n.keys||!n.keys.p256dh||!n.keys.auth){this.log.warn("Invalid push subscription",n),this.unsubscribe(),this.isAvailable=!1,this.pushSubscriptionNotify(e);return}this.log.warn("Push",e,n),this.dispatchEvent("push_"+e,{tokenType:10,tokenValue:JSON.stringify(n)})}else this.log.warn("Push",e,!1),this.dispatchEvent("push_"+e,!1)}ignorePushByMid(e,s){this.isAvailable&&this.serviceMessagePort.invokeVoid("shownNotification",e+"_"+$o(s))}}const yt=new Ln;S&&(S.webPushApiManager=yt);const qo=Object.freeze(Object.defineProperty({__proto__:null,WebPushApiManager:Ln,default:yt},Symbol.toStringTag,{value:"Module"}));function Jo(t){const e=document.createElement("script"),s=new Promise(n=>{e.onload=e.onerror=()=>{n(e)}});return e.src=t,document.body.appendChild(e),s}function Ko(t){const e=Date.now();return t?e/1e3|0:e}class xn{constructor(){this.disabled=$.test||!j.domains.includes(location.hostname)}setAuthorized(e){if(!this.disabled)return O.get("tgme_sync").then(s=>{const n=Ko(!0);if(e&&(s==null?void 0:s.canRedirect)===e&&s.ts+86400>n)return;O.set({tgme_sync:{canRedirect:e,ts:n}});const r=`_websync_?authed=${e?"1":"0"}&version=${encodeURIComponent(j.version+" "+j.suffix)}`,o=["//telegram.me/"+r,"//t.me/"+r].map(i=>Jo(i).then(a=>{a.remove()}));return Promise.all(o)})}}const ps=new xn;S&&(S.telegramMeWebManager=ps);const Zo=Object.freeze(Object.defineProperty({__proto__:null,TelegramMeWebManager:xn,default:ps},Symbol.toStringTag,{value:"Module"})),fs=typeof RTCPeerConnection<"u"&&!_e,Xo=fs;let ot;if(!Z)ot=!0;else try{ot=+navigator.userAgent.match(/Version\/(.+?) /)[1]>=14}catch{ot=!1}const Qo=ot,ei="filter"in(document.createElement("canvas").getContext("2d")||{});var tn;const ti=!!((tn=navigator==null?void 0:navigator.geolocation)!=null&&tn.getCurrentPosition)&&!1,si=fs,Bn=document.createElement("canvas").toDataURL("image/webp").startsWith("data:image/webp"),Ue=new Set(["image/jpeg","image/png","image/bmp"]);Bn&&Ue.add("image/webp");const ni=[["image/jxl","data:image/jxl;base64,/woIAAAMABKIAgC4AF3lEgAAFSqjjBu8nOv58kOHxbSN6wxttW1hSaLIODZJJ3BIEkkaoCUzGM6qJAE="],["image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="]],ri=ni.map(([t,e])=>{const s=new Image,n=new Promise(r=>{s.onload=s.onerror=()=>{const o=s.height===2;r(o?t:void 0)}});return s.src=e,n}),On=Promise.all(ri).then(t=>t.filter(Boolean)),vs=document.createElement("video"),oi=!!vs.canPlayType("video/webm")&&!Z&&!Pe,Rn=!!vs.canPlayType("video/quicktime")||Z||Pe,ii=!!vs.canPlayType('video/mp4; codecs="hev1"'),ai=Object.freeze(Object.defineProperty({__proto__:null,IS_H265_SUPPORTED:ii,IS_MOV_SUPPORTED:Rn,IS_WEBM_SUPPORTED:oi},Symbol.toStringTag,{value:"Module"})),Fs=new Set(["image/gif","video/mp4","video/webm"]);Rn&&Fs.add("video/quicktime");const ci=[...Ue].concat([...Fs]),jn=new Set(ci),ui=!_e&&!1,li="getDisplayMedia"in((navigator==null?void 0:navigator.mediaDevices)||{}),hi=!!(navigator!=null&&navigator.vibrate),Rs=document.createElement("audio"),Nn=!!(Rs.canPlayType&&Rs.canPlayType("audio/ogg;").replace(/no/,""));let Wn=!1;try{const t=document.createElement("canvas").getContext("webgl"),e=t.getExtension("WEBGL_debug_renderer_info"),s=e&&t.getParameter(e.UNMASKED_RENDERER_WEBGL)||"";(s.match(/Apple/)&&!s.match(/Apple GPU/)||t.getSupportedExtensions().indexOf("WEBGL_compressed_texture_s3tc_srgb")===-1)&&(Wn=!0)}catch{}const di=Wn,gi="serviceWorker"in navigator,js={CAN_USE_TRANSFERABLES:Qo,IS_APPLE_MX:di,IS_CALL_SUPPORTED:Xo,IS_CANVAS_FILTER_SUPPORTED:ei,IS_EMOJI_SUPPORTED:$t,IS_GEOLOCATION_SUPPORTED:ti,IS_GROUP_CALL_SUPPORTED:si,IS_PARALLAX_SUPPORTED:ui,IS_SCREEN_SHARING_SUPPORTED:li,IS_TOUCH_SUPPORTED:pe,...ai,IS_VIBRATE_SUPPORTED:hi,IS_OPUS_SUPPORTED:Nn,IS_SHARED_WORKER_SUPPORTED:ft,IS_WEBP_SUPPORTED:Bn,IS_WEBRTC_SUPPORTED:fs,IS_LIVE_STREAM_SUPPORTED:gi,IMAGE_MIME_TYPES_SUPPORTED:Ue,MEDIA_MIME_TYPES_SUPPORTED:jn,VIDEO_MIME_TYPES_SUPPORTED:Fs,...Ar};function mi(){const t=document.createElement("input");t.type="time",t.value="15:00",t.style.visibility="hidden",document.body.append(t);const e=t.offsetWidth;return t.remove(),e>110?"h12":"h23"}const Di={8:new Uint8Array(1),16:new Uint16Array(1),32:new Uint32Array(1)};function bt(t){const e=Di[t];return crypto.getRandomValues(e),e[0]}function Tc(){return""+bt(32)+bt(32)%16777215}const pi=j.version,fi=j.build,Ns={_:"theme",access_hash:"",id:"",settings:[{_:"themeSettings",pFlags:{},base_theme:{_:"baseThemeClassic"},accent_color:3379436,message_colors:[6072403],wallpaper:{_:"wallPaper",pFlags:{default:!0,pattern:!0},access_hash:"",document:void 0,id:"",slug:"pattern",settings:{_:"wallPaperSettings",pFlags:{},intensity:50,background_color:14409147,second_background_color:7054727,third_background_color:14014605,fourth_background_color:8960132}}},{_:"themeSettings",pFlags:{},base_theme:{_:"baseThemeNight"},accent_color:8877281,message_colors:[8877281],wallpaper:{_:"wallPaper",pFlags:{default:!0,pattern:!0,dark:!0},access_hash:"",document:void 0,id:"",slug:"pattern",settings:{_:"wallPaperSettings",pFlags:{},intensity:-50,background_color:16696470,second_background_color:14511289,third_background_color:9842623,fourth_background_color:5200853}}}],slug:"",title:"",emoticon:"ğŸ ",pFlags:{default:!0}},Ws=(t,e,s)=>({...Ns,name:t,settings:{...Ns.settings.find(n=>n.base_theme._===e),highlightingColor:s}}),V={allDialogsLoaded:{},pinnedOrders:{},contactsListCachedTime:0,updates:{},filtersArr:[],maxSeenMsgId:0,stateCreatedTime:Date.now(),recentEmoji:[],recentCustomEmoji:[],topPeersCache:{},recentSearch:[],version:pi,build:fi,authState:{_:ie?"authStateSignIn":"authStateSignQr"},hiddenPinnedMessages:{},settings:{messagesTextSize:16,distanceUnit:"kilometers",sendShortcut:"enter",autoDownload:{photo:{contacts:!0,private:!0,groups:!0,channels:!0},video:{contacts:!0,private:!0,groups:!0,channels:!0},file:{contacts:!0,private:!0,groups:!0,channels:!0}},autoDownloadNew:{_:"autoDownloadSettings",file_size_max:3145728,pFlags:{video_preload_large:!0,audio_preload_next:!0},photo_size_max:1048576,video_size_max:15728640,video_upload_maxbitrate:100,small_queue_active_operations_max:0,large_queue_active_operations_max:0},stickers:{suggest:"all",dynamicPackOrder:!0,loop:!0},emoji:{suggest:!0,big:!0},themes:[Ws("day","baseThemeClassic","hsla(86.4, 43.846153%, 45.117647%, .4)"),Ws("night","baseThemeNight","hsla(299.142857, 44.166666%, 37.470588%, .4)")],theme:"system",notifications:{sound:!1},timeFormat:mi(),liteMode:{all:!1,animations:!1,chat:!1,chat_background:!1,chat_spoilers:!1,effects:!1,effects_premiumstickers:!1,effects_reactions:!1,effects_emoji:!1,emoji:!1,emoji_messages:!1,emoji_panel:!1,gif:!1,stickers:!1,stickers_chat:!1,stickers_panel:!1,video:!1},savedAsForum:!1},playbackParams:{volume:1,muted:!1,playbackRate:1,playbackRates:{voice:1,video:1,audio:1},loop:!1,round:!1},keepSigned:!0,chatContextMenuHintWasShown:!1,hideChatJoinRequests:{},stateId:bt(32),notifySettings:{},confirmedWebViews:[],seenTooltips:{storySound:!1},hiddenSimilarChannels:[],appConfig:{},accountThemes:{},translations:{peers:{},enabledPeers:{},enabled:!0,showInMenu:!0,doNotTranslate:[]}};function Ze(t,e){t=t.split(" ",1)[0],e=e.split(" ",1)[0];const s=t.split("."),n=e.split(".");for(let r=0;r<s.length;++r){const o=+s[r],i=+n[r];if(o>i)return 1;if(o<i)return-1}return 0}function vi(t){return typeof t=="object"&&t!==null}function Un(t,e,s,n,r,o){for(const i in t){const a=o?`${o}.${i}`:i;r!=null&&r.has(a)||(typeof e[i]!=typeof t[i]?(e[i]=U(t[i]),s==null||s(n||i)):vi(t[i])&&Un(t[i],e[i],s,n||i,r,a))}}function Fi(t,e,s){const n=performance.now();return(s||console).warn(dt(),"start",e),t.then(()=>{(s||console).warn(dt(),"end",e,performance.now()-n)}),t}function yi(t){return(...e)=>Fi(...e,t)}const bi=24*60*60*1e3,Xe=V.version,Le=V.build,Qe=Object.keys(V),wi=["contactsListCachedTime","stateCreatedTime","maxSeenMsgId","filtersArr"];async function Ei(){const t=ee("STATE-LOADER",ds.Error),e=performance.now(),s=yi(t),n=Qe.map(F=>s(Ce.get(F),"state "+F)).concat(s(O.get("user_auth"),"auth"),s(O.get("state_id"),"auth"),s(O.get("k_build"),"auth"),s(O.get("auth_key_fingerprint"),"auth"),s(O.get(`dc${j.baseDcId}_auth_key`),"auth")).concat(s(Ce.get("user_auth"),"old auth")),r=await Promise.all(n);t.warn("promises",performance.now()-e);const o=[],i=(F,_)=>{c[F]=_,o.push(F)},a=F=>{o.length=0,c=F,o.push(...Object.keys(c))};let c={};for(let F=0,_=Qe.length;F<_;++F){const x=Qe[F],y=r[F];y!==void 0?c[x]=y:i(x,U(V[x]))}r.splice(0,Qe.length);let l=r.shift();const u=r.shift(),h=r.shift(),d=r.shift(),v=r.shift(),w=r.shift();if(!l&&w){l=w;const F=["dc","server_time_offset","xt_instance"];for(let y=1;y<=5;++y)F.push(`dc${y}_server_salt`),F.push(`dc${y}_auth_key`);const _=await Promise.all(F.map(y=>Ce.get(y)));F.push("user_auth"),_.push(typeof l=="number"||typeof l=="string"?{dcID:_[0]||j.baseDcId,date:Date.now()/1e3|0,id:l.toPeerId(!1)}:l);const x={};F.forEach((y,M)=>{x[y]=_[M]}),await O.set(x)}l&&(c.authState={_:"authStateSignedIn"},b.dispatchEvent("user_auth",typeof l=="number"||typeof l=="string"?{dcID:0,date:Date.now()/1e3|0,id:l.toPeerId(!1)}:l));const p=new Set,f=F=>{F.push("authState","stateId");const _=new Map(F.map(y=>[y,c[y]]));c=U(V),_.forEach((y,M)=>{c[M]=y});const x=["chats","dialogs","users"];for(const y of x)p.add(y);a(c)};if(c.stateId!==u&&(u!==void 0&&f([]),await O.set({state_id:c.stateId})),v){const F=v.slice(0,8);d?d!==F&&f([]):f(["settings"]),d!==F&&await O.set({auth_key_fingerprint:F})}const k=Date.now();c.stateCreatedTime+bi<k&&(Ne&&t("will refresh state",c.stateCreatedTime,k),(F=>{F.forEach(_=>{i(_,U(V[_]))})})(wi));const A=c.settings.autoDownload;if((A==null?void 0:A.private)!==void 0){const F=["contacts","private","groups","channels"];["photo","video","file"].forEach(_=>{const x=A[_]={};F.forEach(y=>{x[y]=A[y]})}),F.forEach(_=>{delete A[_]}),i("settings",c.settings)}Un(V,c,F=>{i(F,c[F])},void 0,new Set(["settings.themes"]));let P,C;if(c.version!==Xe||c.build!==Le){if(c.build<322&&(i("allDialogsLoaded",U(V.allDialogsLoaded)),i("pinnedOrders",U(V.pinnedOrders)),i("filtersArr",U(V.filtersArr)),p.add("dialogs")),Ze(c.version,"1.7.1")===-1){let F=!1;if(Ze(c.version,"1.3.0")===-1)F=!0,c.settings.theme=U(V.settings.theme),c.settings.themes=U(V.settings.themes);else if(Ze(c.version,"1.7.1")===-1){F=!0;const _=c.settings.themes;c.settings.themes=U(V.settings.themes);try{_.forEach(x=>{const y=x.background;if(!y)return;const M=c.settings.themes.find(D=>D.name===x.name);M.settings.highlightingColor=y.highlightingColor;const g=D=>D&&parseInt(D.slice(1),16),m=(y.color||"").split(",").map(g);if(y.color&&!y.slug)M.settings.wallpaper={_:"wallPaperNoFile",id:0,pFlags:{},settings:{_:"wallPaperSettings",pFlags:{}}};else{const D={_:"wallPaper",id:0,access_hash:0,slug:y.slug,document:{},pFlags:{},settings:{_:"wallPaperSettings",pFlags:{}}},E=D.settings;M.settings.wallpaper=D,y.slug&&!y.color?E.pFlags.blur=y.blur||void 0:y.intensity&&(E.intensity=y.intensity,D.pFlags.pattern=!0,D.pFlags.dark=y.intensity<0||void 0)}if(m.length){const D=M.settings.wallpaper.settings;D.background_color=m[0],D.second_background_color=m[1],D.third_background_color=m[2],D.fourth_background_color=m[3]}})}catch(x){console.error("migrating themes error",x)}}F&&i("settings",c.settings)}if(c.build<309&&(c.settings.liteMode.animations=!c.settings.animationsEnabled,c.settings.liteMode.video=!c.settings.autoPlay.videos,c.settings.liteMode.gif=!c.settings.autoPlay.gifs),c.build<312&&typeof c.settings.stickers.suggest=="boolean"&&(c.settings.stickers.suggest=c.settings.stickers.suggest?"all":"none"),c.build<=432){let F=!1;try{for(const _ of c.settings.themes)_.settings.highlightingColor||(_.settings.highlightingColor=_.settings.highlightningColor,delete _.settings.highlightningColor,F=!0)}catch{}F&&i("settings",c.settings)}c.appConfig=U(V.appConfig),Ze(c.version,Xe)!==0&&(P=Xe,C=c.version),i("version",Xe),i("build",Le)}return h!==Le&&(!h||h<Le)&&O.set({k_build:Le}),b.settings=c.settings,Ne&&t("state res",c,U(c)),t.warn("total",performance.now()-e),{state:c,resetStorages:p,newVersion:P,oldVersion:C,pushedKeys:o}}let Us;function Ai(){return Us??(Us=Ei())}class Ci{constructor(){this.sampleRate=48e3,this.tasks=[],this.keepAlive=!1,this.log=ee("OPUS",ds.Error)}isPlaySupported(){return Nn}loadWavWorker(){this.wavWorker||(this.wavWorker=new Worker("waveWorker.min.js"),this.wavWorker.addEventListener("message",e=>{const s=e.data;if(this.log("[WAV] got message:",s),s&&s.page){const n=s.page;this.onTaskEnd(this.tasks.shift(),n)}}))}loadWorker(){this.worker||(this.worker=new Worker("decoderWorker.min.js"),this.worker.addEventListener("message",e=>{const s=e.data;this.log("[DECODER] got message",s),s.type==="done"?(this.wavWorker.postMessage({command:"done"}),s.waveform&&(this.tasks[0].waveform=s.waveform)):this.wavWorker.postMessage({command:"encode",buffers:e.data},Z?void 0:s.map(n=>n.buffer))}))}setKeepAlive(e){this.keepAlive=e,this.keepAlive?(this.loadWorker(),this.loadWavWorker()):this.tasks.length||this.terminateWorkers()}onTaskEnd(e,s){s?(clearTimeout(e.timeout),e.callback.resolve({bytes:s,waveform:e.waveform})):e.callback.reject("timeout"),this.tasks.length&&this.executeNewTask(this.tasks[0]),this.terminateWorkers()}terminateWorkers(e=!1){(this.keepAlive||this.tasks.length)&&!e||(this.worker&&(this.worker.terminate(),this.worker=null),this.wavWorker&&(this.wavWorker.terminate(),this.wavWorker=null))}executeNewTask(e){this.worker.postMessage({command:"init",decoderSampleRate:this.sampleRate,outputBufferSampleRate:this.sampleRate}),this.wavWorker.postMessage({command:"init",wavBitDepth:16,wavSampleRate:this.sampleRate}),this.log("[DECODER] send decode"),this.worker.postMessage({command:"decode",pages:e.pages,waveform:e.withWaveform},Z?void 0:[e.pages.buffer]),e.timeout=window.setTimeout(()=>{this.log.error("decode timeout"),this.terminateWorkers(!0),this.tasks.length&&(this.loadWorker(),this.loadWavWorker()),this.onTaskEnd(this.tasks.shift())},1e4)}pushDecodeTask(e,s){return new Promise((n,r)=>{const o={pages:e,withWaveform:s,callback:{resolve:n,reject:r},timeout:0};this.loadWorker(),this.loadWavWorker(),this.tasks.push(o)===1&&this.executeNewTask(o)})}async decode(e,s=!1){return this.pushDecodeTask(e,s).then(async n=>{const r=new Blob([n.bytes],{type:"audio/wav"});return{url:await qe.invoke("createObjectURL",r),waveform:n.waveform}})}}const zn=new Ci;S.opusDecodeController=zn;class ki extends gs{constructor(){super("CRYPTO"),this.lastIndex=-1}invokeCryptoNew({method:e,args:s,transfer:n}){const r={method:e,args:s},o=this.listeners.invoke;if(o!=null&&o.size){let a=o.values().next().value.callback(r);return!ve&&!(a instanceof Promise)&&(a=Promise.resolve(a)),a}const i=e==="aes-encrypt"||e==="aes-decrypt"?this.lastIndex=(this.lastIndex+1)%this.sendPorts.length:0;return this.invoke("invoke",r,void 0,this.sendPorts[i],n)}invokeCrypto(e,...s){return this.invokeCryptoNew({method:e,args:s})}}const it=new ki;S&&(S.cryptoMessagePort=it);function Si(t){return["image/jpeg","image/png","image/gif","image/svg+xml","image/webp","image/bmp","image/avif","image/jxl","video/mp4","video/webm","video/quicktime","audio/ogg","audio/mpeg","audio/mp4","audio/wav","application/json","application/pdf"].indexOf(t)===-1?"application/octet-stream":t}function Vn(t,e=""){Array.isArray(t)||(t=[t]);const s=Si(e);return new Blob(t,{type:s})}class Pi{constructor(e,s,n){this.mimeType=e,this.size=s,this.saveFileCallback=n,this.bytes=new Uint8Array(s)}async write(e,s){const n=s+e.byteLength;if(n>this.bytes.byteLength){const r=new Uint8Array(n);r.set(this.bytes,0),this.bytes=r}this.bytes.set(e,s)}truncate(){this.bytes=new Uint8Array}trim(e){this.bytes=this.bytes.slice(0,e)}finalize(e=!0){const s=Vn(this.bytes,this.mimeType);return e&&this.saveFileCallback&&this.saveFileCallback(s),s}getParts(){return this.bytes}replaceParts(e){this.bytes=e}}const Hn=class at{constructor(e){this.dbName=e,this.useStorage=!0,$.test&&(this.dbName+="_test"),at.STORAGES.length&&(this.useStorage=at.STORAGES[0].useStorage),this.openDatabase(),at.STORAGES.push(this)}openDatabase(){return this.openDbPromise??(this.openDbPromise=caches.open(this.dbName))}delete(e){return this.timeoutOperation(s=>s.delete("/"+e))}deleteAll(){return caches.delete(this.dbName)}get(e){return this.timeoutOperation(s=>s.match("/"+e))}save(e,s){return this.timeoutOperation(n=>n.put("/"+e,s))}getFile(e,s="blob"){return this.get(e).then(n=>{if(!n)throw fe("NO_ENTRY_FOUND");return n[s]()})}saveFile(e,s){s instanceof Blob||(s=Vn(s));const n=new Response(s,{headers:{"Content-Length":""+s.size}});return this.save(e,n).then(()=>s)}timeoutOperation(e){return this.useStorage?new Promise(async(s,n)=>{let r=!1;const o=setTimeout(()=>{n(),r=!0},15e3);try{const i=await this.openDatabase();if(!i)throw this.useStorage=!1,this.openDbPromise=void 0,"no cache?";const a=await e(i);if(r)return;s(a)}catch(i){n(i)}clearTimeout(o)}):Promise.reject(fe("STORAGE_OFFLINE"))}prepareWriting(e,s,n){return{deferred:ne(),getWriter:()=>new Pi(n,s,r=>this.saveFile(e,r).catch(()=>r))}}static toggleStorage(e,s){return Promise.all(this.STORAGES.map(n=>{if(n.useStorage=e,!!s&&!e)return n.deleteAll()}))}};Hn.STORAGES=[];let _i=Hn;function zs(t,e){return Promise.all([ms.toggleStorage(t,e),_i.toggleStorage(t,e),O.toggleStorage(t,e)]).then(lt,lt)}class Ti extends gs{constructor(){super("SERVICE"),S&&(S.serviceMessagePort=this)}}const Ii=""+new URL("/assets/sw-D9sW9K3C--AB9hJCA.js",import.meta.url).href,ys="";function Vs(...t){return t.join(ys)}function Mi(t){return t.split(ys)}function Li(t,e,s,n){const r=e.split(ys),o=r.length;let i=t;for(let c=0;c<o-1;++c){const l=r[c];i=i[l]??(i[l]={})}const a=r[o-1];s===void 0&&n?delete i[a]:i[a]=s}const De="_";function xi(t,e){const s="",n=s[s.length-1]||"";let r;switch(t._){case"inputPhotoFileLocation":{r=["photo",s[0],t.id,t.thumb_size].filter(Boolean).join(De);break}case"inputDocumentFileLocation":{r=["document",s[0],t.id,t.thumb_size].filter(Boolean).join(De);break}case"inputPeerPhotoFileLocation":r=["peerPhoto",t.photo_id,t.pFlags.big?"big":"small"].join(De);break;case"inputStickerSetThumb":{r=["stickerSetThumb",t.stickerset.id||t.stickerset.short_name||t.stickerset.emoticon||t.stickerset._,t.thumb_version].join(De);break}case"inputFileLocation":{r=[t.volume_id,t.local_id].join(De);break}case"inputWebFileLocation":{r=["webFile",t.url].join(De);break}case"inputWebFileGeoPointLocation":{const o=t.geo_point;r=["geoPoint",o.lat,o.long,t.w,t.h,t.zoom,t.scale].join(De);break}default:{console.error("Unrecognized location:",t),r="";break}}return r+(e!=null&&e.downloadId?"_download":"")+(n&&"."+n)}function Bi(t){return t==null?void 0:t._.includes("inputWebFile")}function Oi(t){return Bi(t)?xi(t):t._+(t.id??t.url)}function Ri(t){return{downloaded:0,url:"",type:t}}function ji(t,e){return t+(e!==void 0?"-"+e:"")}function jt(t,e){return t instanceof Promise?t.then(e):e(t)}function Hs(t){return typeof t=="number"&&t<ht}const ts=Symbol("store-raw"),ke=Symbol("store-node"),se=Symbol("store-has"),Yn=Symbol("store-self");function $n(t){let e=t[X];if(!e&&(Object.defineProperty(t,X,{value:e=new Proxy(t,Ui)}),!Array.isArray(t))){const s=Object.keys(t),n=Object.getOwnPropertyDescriptors(t);for(let r=0,o=s.length;r<o;r++){const i=s[r];n[i].get&&Object.defineProperty(t,i,{enumerable:n[i].enumerable,get:n[i].get.bind(e)})}}return e}function de(t){let e;return t!=null&&typeof t=="object"&&(t[X]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function Fe(t,e=new Set){let s,n,r,o;if(s=t!=null&&t[ts])return s;if(!de(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let i=0,a=t.length;i<a;i++)r=t[i],(n=Fe(r,e))!==r&&(t[i]=n)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const i=Object.keys(t),a=Object.getOwnPropertyDescriptors(t);for(let c=0,l=i.length;c<l;c++)o=i[c],!a[o].get&&(r=t[o],(n=Fe(r,e))!==r&&(t[o]=n))}return t}function wt(t,e){let s=t[e];return s||Object.defineProperty(t,e,{value:s=Object.create(null)}),s}function ze(t,e,s){if(t[e])return t[e];const[n,r]=re(s,{equals:!1,internal:!0});return n.$=r,t[e]=n}function Ni(t,e){const s=Reflect.getOwnPropertyDescriptor(t,e);return!s||s.get||!s.configurable||e===X||e===ke||(delete s.value,delete s.writable,s.get=()=>t[X][e]),s}function Gn(t){Zt()&&ze(wt(t,ke),Yn)()}function Wi(t){return Gn(t),Reflect.ownKeys(t)}const Ui={get(t,e,s){if(e===ts)return t;if(e===X)return s;if(e===Kt)return Gn(t),s;const n=wt(t,ke),r=n[e];let o=r?r():t[e];if(e===ke||e===se||e==="__proto__")return o;if(!r){const i=Object.getOwnPropertyDescriptor(t,e);Zt()&&(typeof o!="function"||t.hasOwnProperty(e))&&!(i&&i.get)&&(o=ze(n,e,o)())}return de(o)?$n(o):o},has(t,e){return e===ts||e===X||e===Kt||e===ke||e===se||e==="__proto__"?!0:(Zt()&&ze(wt(t,se),e)(),e in t)},set(){return!0},deleteProperty(){return!0},ownKeys:Wi,getOwnPropertyDescriptor:Ni};function q(t,e,s,n=!1){if(!n&&t[e]===s)return;const r=t[e],o=t.length;s===void 0?(delete t[e],t[se]&&t[se][e]&&r!==void 0&&t[se][e].$()):(t[e]=s,t[se]&&t[se][e]&&r===void 0&&t[se][e].$());let i=wt(t,ke),a;if((a=ze(i,e,r))&&a.$(()=>s),Array.isArray(t)&&t.length!==o){for(let c=t.length;c<o;c++)(a=i[c])&&a.$();(a=ze(i,"length",o))&&a.$(t.length)}(a=i[Yn])&&a.$()}function qn(t,e){const s=Object.keys(e);for(let n=0;n<s.length;n+=1){const r=s[n];q(t,r,e[r])}}function zi(t,e){if(typeof e=="function"&&(e=e(t)),e=Fe(e),Array.isArray(e)){if(t===e)return;let s=0,n=e.length;for(;s<n;s++){const r=e[s];t[s]!==r&&q(t,s,r)}q(t,"length",n)}else qn(t,e)}function Oe(t,e,s=[]){let n,r=t;if(e.length>1){n=e.shift();const i=typeof n,a=Array.isArray(t);if(Array.isArray(n)){for(let c=0;c<n.length;c++)Oe(t,[n[c]].concat(e),s);return}else if(a&&i==="function"){for(let c=0;c<t.length;c++)n(t[c],c)&&Oe(t,[c].concat(e),s);return}else if(a&&i==="object"){const{from:c=0,to:l=t.length-1,by:u=1}=n;for(let h=c;h<=l;h+=u)Oe(t,[h].concat(e),s);return}else if(e.length>1){Oe(t[n],e,[n].concat(s));return}r=t[n],s=[n].concat(s)}let o=e[0];typeof o=="function"&&(o=o(r,s),o===r)||n===void 0&&o==null||(o=Fe(o),n===void 0||de(r)&&de(o)&&!Array.isArray(o)?qn(r,o):q(t,n,o))}function Jn(...[t,e]){const s=Fe(t||{}),n=Array.isArray(s),r=$n(s);function o(...i){mo(()=>{n&&i.length===1?zi(s,i[0]):Oe(s,i)})}return[r,o]}const ss=Symbol("store-root");function Ae(t,e,s,n,r){const o=e[s];if(t===o)return;const i=Array.isArray(t);if(s!==ss&&(!de(t)||!de(o)||i!==Array.isArray(o)||r&&t[r]!==o[r])){q(e,s,t);return}if(i){if(t.length&&o.length&&(!n||r&&t[0]&&t[0][r]!=null)){let l,u,h,d,v,w,p,f;for(h=0,d=Math.min(o.length,t.length);h<d&&(o[h]===t[h]||r&&o[h]&&t[h]&&o[h][r]===t[h][r]);h++)Ae(t[h],o,h,n,r);const k=new Array(t.length),A=new Map;for(d=o.length-1,v=t.length-1;d>=h&&v>=h&&(o[d]===t[v]||r&&o[h]&&t[h]&&o[d][r]===t[v][r]);d--,v--)k[v]=o[d];if(h>v||h>d){for(u=h;u<=v;u++)q(o,u,t[u]);for(;u<t.length;u++)q(o,u,k[u]),Ae(t[u],o,u,n,r);o.length>t.length&&q(o,"length",t.length);return}for(p=new Array(v+1),u=v;u>=h;u--)w=t[u],f=r&&w?w[r]:w,l=A.get(f),p[u]=l===void 0?-1:l,A.set(f,u);for(l=h;l<=d;l++)w=o[l],f=r&&w?w[r]:w,u=A.get(f),u!==void 0&&u!==-1&&(k[u]=o[l],u=p[u],A.set(f,u));for(u=h;u<t.length;u++)u in k?(q(o,u,k[u]),Ae(t[u],o,u,n,r)):q(o,u,t[u])}else for(let l=0,u=t.length;l<u;l++)Ae(t[l],o,l,n,r);o.length>t.length&&q(o,"length",t.length);return}const a=Object.keys(t);for(let l=0,u=a.length;l<u;l++)Ae(t[a[l]],o,a[l],n,r);const c=Object.keys(o);for(let l=0,u=c.length;l<u;l++)t[c[l]]===void 0&&q(o,c[l],void 0)}function Kn(t,e={}){const{merge:s,key:n="id"}=e,r=Fe(t);return o=>{if(!de(o)||!de(r))return r;const i=Ae(r,{[ss]:o},ss,s,n);return i===void 0?o:i}}const[Zn,ns]=rt(()=>Jn({})),Vi=(...t)=>{const e=t[0];ns(...t),b.managers.appStateManager.setByKey(e,Fe(Zn[e]))},Ys=(t,e)=>{if(typeof t=="object"){ns(t);return}ns(t,Kn(e))},Ic=()=>[Zn,Vi];function Hi(t,e="asc"){if(!t)return[];const s=t instanceof Map?[...t.keys()]:Object.keys(t).map(n=>+n);return e==="asc"?s.sort((n,r)=>n-r):s.sort((n,r)=>r-n)}const[Xn,Qn]=Jn({});function er(t,e){return typeof t=="function"?le(()=>e(t())):e(t)}function Mc(t){return er(t,e=>Xn[e])}function Lc(t){return er(t,e=>Xn[e==null?void 0:e.toPeerId(!0)])}function Yi(t,e){Qn(t,Kn(e))}function $i(t){Qn(t)}class Gi extends $e{constructor(){super(),this.onMirrorTask=e=>{var a,c;var s;const{name:n,key:r,value:o}=e;if((c=(a=this.processMirrorTaskMap)[n])==null||c.call(a,e),!e.hasOwnProperty("key")){this.mirrors[n]=o;return}const i=(s=this.mirrors)[n]??(s[n]={});Li(i,r,o,!0)},this.mirrors={state:void 0,thumbs:{},stickerThumbs:{},availableReactions:void 0,messages:{},groupedMessages:{},peers:{},avatars:{}},this.processMirrorTaskMap={messages:e=>{var a;var s;const n=e.value;let r,o;if(n)r=n.mid,o=n.grouped_id;else{const[c,l]=Mi(e.key);r=+l;const u=(a=this.mirrors.messages[c])==null?void 0:a[r];if(!u)return;o=u.grouped_id}if(!o)return;const i=(s=this.mirrors.groupedMessages)[o]??(s[o]=new Map);n?i.set(r,n):(i.delete(r),i.size||delete this.mirrors.groupedMessages[o])},state:e=>{e.key?Ys(e.key,e.value):console.error(e)},peers:e=>{e.key?Yi(e.key.toPeerId(),e.value):$i(e.value)}},this.tabState={chatPeerIds:[],idleStartTime:0},this.log("constructor"),this.registerWorker(),this.registerServiceWorker(),this.registerCryptoWorker(),this.addMultipleEventsListeners({convertWebp:({fileName:e,bytes:s})=>_n.convert(e,s),convertOpus:({fileName:e,bytes:s})=>zn.pushDecodeTask(s,!1).then(n=>n.bytes),event:({name:e,args:s})=>{b.dispatchEventSingle(e,...s)},localStorageProxy:e=>{const s=e;return O[s.type](...s.args)},mirror:this.onMirrorTask,receivedServiceMessagePort:()=>{this.log.warn("mtproto worker received service message port")}}),b.addEventListener("language_change",e=>{b.managers.networkerFactory.setLanguage(e),b.managers.appAttachMenuBotsManager.onLanguageChange()}),window.addEventListener("online",()=>{b.managers.networkerFactory.forceReconnectTimeout()}),b.addEventListener("logging_out",()=>{const e=["cachedFiles","cachedStreamChunks"];Promise.all([zs(!1,!0),O.clear(),Promise.race([ps.setAuthorized(!1),hs(3e3)]),yt.forceUnsubscribe(),Promise.all(e.map(s=>caches.delete(s)))]).finally(()=>{Mn.reload()})}),vt.addEventListener("change",e=>{this.updateTabStateIdle(e)}),this.updateTabStateIdle(vt.isIdle)}sendEnvironment(){this.log("Passing environment:",js),this.invoke("environment",js)}pingServiceWorkerWithIframe(){if(this.pingServiceWorkerPromise)return this.pingServiceWorkerPromise;const e=this.pingServiceWorkerPromise=ne(),s=document.createElement("iframe");s.hidden=!0;const n=()=>{clearTimeout(i),setTimeout(()=>{this.pingServiceWorkerPromise=void 0},1e4),s.removeEventListener("load",r),s.removeEventListener("error",o),s.remove()},r=()=>{n(),e.resolve()},o=()=>{n(),e.reject()};s.addEventListener("load",r),s.addEventListener("error",o),s.src="ping/"+(Math.random()*4294967295|0)+".nocache",document.body.append(s);const i=window.setTimeout(o,1500);return e}attachServiceWorker(e){if(this.lastServiceWorker===e){this.log.warn("trying to attach same service worker");return}this.lastServiceWorker&&this.serviceMessagePort.detachPort(this.lastServiceWorker),this.serviceMessagePort.attachSendPort(this.lastServiceWorker=e),this.serviceMessagePort.invokeVoid("hello",void 0)}_registerServiceWorker(){navigator.serviceWorker.register(Ii,{type:"module",scope:"./"}).then(e=>{this.log("SW registered",e);const s=new URL(window.location.href),n="swfix",r=+s.searchParams.get(n)||0;if(e.active&&!navigator.serviceWorker.controller){if(r>=3)throw new Error("no controller");return e.unregister().then(()=>{s.searchParams.set(n,""+(r+1)),window.location.href=s.toString()})}r&&(s.searchParams.delete(n),history.pushState(void 0,"",s)),(e.installing||e.waiting||e.active).addEventListener("statechange",i=>{this.log("SW statechange",i)});const o=navigator.serviceWorker.controller||e.installing||e.waiting||e.active;this.attachServiceWorker(o)}).catch(e=>{this.log.error("SW registration failed!",e),this.invokeVoid("serviceWorkerOnline",!1)})}registerServiceWorker(){if(!("serviceWorker"in navigator))return;this.serviceMessagePort=yt.serviceMessagePort=new Ti;const e=navigator.serviceWorker;this._registerServiceWorker(),e.addEventListener("controllerchange",()=>{this.log.warn("controllerchange");const s=e.controller;this.attachServiceWorker(s),s.addEventListener("error",n=>{this.log.error("controller error:",n)})}),this.serviceMessagePort.attachListenPort(e),this.serviceMessagePort.addMultipleEventsListeners({port:(s,n,r)=>{this.log.warn("got service worker port"),this.invokeVoid("serviceWorkerPort",void 0,void 0,[r.ports[0]])},hello:(s,n)=>{this.serviceMessagePort.resendLockTask(n)},share:s=>{this.log("will try to share something"),this.share=s}}),e.addEventListener("messageerror",s=>{this.log.error("SW messageerror:",s)})}async registerCryptoWorker(){const e=h=>fetch(h).then(d=>d.text()).then(d=>{const v=location.pathname.split("/");v[v.length-1]="";const w=location.origin+v.join("/");return d=d.replace(/(import (?:.+? from )?['"])\//g,"$1"+w),new Blob([d],{type:"application/javascript"})}),s={construct(h,d){return{url:un(d[0]).toString()}}},n=[Worker,typeof SharedWorker<"u"&&SharedWorker].filter(Boolean);n.forEach(h=>window[h.name]=new Proxy(h,s));const r=new Worker(new URL(""+new URL("/assets/crypto.worker-CfCshcpI-BrfoZlMS.js",import.meta.url).href,import.meta.url),{type:"module"});n.forEach(h=>window[h.name]=h);const o=r.url,i=h=>new c(h,{type:"module"}),a=h=>this.attachWorkerToPort(h,it,"crypto"),c=ft?SharedWorker:Worker;it.addEventListener("port",(h,d,v)=>{this.invokeVoid("cryptoPort",void 0,void 0,[v.ports[0]])});const l=i(o);a(l);const u=await e(o);(await this.invoke("createProxyWorkerURLs",{originalUrl:o,blob:u})).slice(1).map(i).forEach(a)}registerWorker(){let e;ft?e=new SharedWorker(new URL(""+new URL("/assets/mtproto.worker-bDoFZUvD-Z9exHIN-.js",import.meta.url).href,import.meta.url),{type:"module"}):e=new Worker(new URL(""+new URL("/assets/mtproto.worker-bDoFZUvD-Z9exHIN-.js",import.meta.url).href,import.meta.url),{type:"module"}),this.onWorkerFirstMessage(e)}attachWorkerToPort(e,s,n){const r=e.port||e;s.attachPort(r),e.addEventListener("error",o=>{this.log.error(n,"worker error",o)})}onWorkerFirstMessage(e){this.log("set webWorker"),this.attachWorkerToPort(e,this,"mtproto")}loadState(){return Promise.all([Ai().then(e=>(this.newVersion=e.newVersion,this.oldVersion=e.oldVersion,this.mirrors.state=e.state,Ys(e.state),e))])}sendState(){return this.loadState().then(e=>{const[s]=e;return this.invoke("state",{...s,userId:b.myId.toUserId()}),e})}invokeCrypto(e,...s){return it.invokeCrypto(e,...s)}async toggleStorages(e,s){var n;await zs(e,s),this.invoke("toggleStorages",{enabled:e,clearWrite:s}),(n=this.serviceMessagePort)==null||n.invokeVoid("toggleStorages",{enabled:e,clearWrite:s})}async getMirror(e){return this.mirrors[e]}getState(){return this.getMirror("state")}getCacheContext(e,s=xr,n=Oi(e)){var r;return((r=this.mirrors.thumbs[n])==null?void 0:r[s])||Ri(s)}getStickerCachedThumb(e,s){const n=ji(e,s);return this.mirrors.stickerThumbs[n]}getAvailableReactions(){var e;return(e=this.mirrors).availableReactions||(e.availableReactions=b.managers.appReactionsManager.getAvailableReactions())}getReaction(e){return jt(this.getAvailableReactions(),s=>s.find(n=>n.reaction===e))}getMessageFromStorage(e,s){var n;return e.endsWith("history")&&Hs(s)&&(e=this.getGlobalHistoryMessagesStorage()),(n=this.mirrors.messages[e])==null?void 0:n[s]}getGroupsFirstMessage(e){if(!(e!=null&&e.grouped_id))return e;const s=this.mirrors.groupedMessages[e.grouped_id];let n=Number.MAX_SAFE_INTEGER;for(const[r,o]of s)o.mid<n&&(n=o.mid);return s.get(n)}getMidsByGroupedId(e,s="asc"){return Hi(this.mirrors.groupedMessages[e],s)}getMessagesByGroupedId(e){const s=this.getMidsByGroupedId(e,"asc"),n=this.mirrors.groupedMessages[e];return s.map(r=>n.get(r))}getHistoryMessagesStorage(e){return`${e}_history`}getGlobalHistoryMessagesStorage(){return this.getHistoryMessagesStorage(ln)}getMessageById(e){if(Hs(e))return this.getMessageFromStorage(this.getGlobalHistoryMessagesStorage(),e)}getMessageByPeer(e,s){return e?this.getMessageFromStorage(this.getHistoryMessagesStorage(e),s):this.getMessageById(s)}getPeer(e){return this.mirrors.peers[e]}getUser(e){return this.mirrors.peers[e.toPeerId(!1)]}getChat(e){return this.mirrors.peers[e.toPeerId(!0)]}isForum(e){var s,n;return!!((n=(s=this.getPeer(e))==null?void 0:s.pFlags)!=null&&n.forum)}isAvatarCached(e,s){const n=this.mirrors.avatars[e];return s===void 0?!!n:!!(n&&n[s]&&!(n[s]instanceof Promise))}loadAvatar(e,s,n){var r;const o=(r=this.mirrors.avatars)[e]??(r[e]={});return o[n]??(o[n]=b.managers.appAvatarsManager.loadAvatar(e,s,n))}getAppConfig(e){if(e&&(this.appConfig=void 0),!this.appConfig){const s=b.managers.apiManager.getAppConfig().then(n=>(this.appConfig===s&&(this.appConfig=n),n));return this.appConfig=s}return this.appConfig}isPremiumFeaturesHidden(){return jt(this.isPremiumPurchaseBlocked(),e=>e&&!b.premium)}isPremiumPurchaseBlocked(){return jt(this.getAppConfig(),e=>!!e.premium_purchase_blocked)}updateTabState(e,s){this.tabState[e]=s,this.invokeVoid("tabState",this.tabState)}updateTabStateIdle(e){this.updateTabState("idleStartTime",e?Date.now():0)}}const tr=new Gi;S.apiManagerProxy=tr;const qe=tr,qi={};function Ji(t,e){return new Proxy({},{get:(s,n,r)=>(...o)=>{var a;const i=qe.invoke("manager",{name:t,method:n,args:o},e);return Ne&&((a=qi[t])!=null&&a.has(n))&&console.warn("manager request",t,n,o,e),i}})}function $s(t,e){return new Proxy(t,{get:(s,n,r)=>s[n]??(s[n]=Ji(n,e))})}let et;function Ki(){return et||(et=$s({},!1),et.acknowledged=$s({},!0),et)}function sr(t,e,s){return Math.min(s,Math.max(e,t))}function ue(t,e,s){t/=255,e/=255,s/=255;const n=Math.max(t,e,s),r=n-Math.min(t,e,s),o=r&&(n===t?(e-s)/r:n==e?2+(s-t)/r:4+(t-e)/r);return[60*(o<0?o+6:o),n&&r/n,n]}function bs(t,e,s){const n=(r,o=(r+t/60)%6)=>Math.round((s-s*e*Math.max(Math.min(o,4-o,1),0))*255);return[n(5),n(3),n(1)]}function rs(t,e,s,n=1){t/=255,e/=255,s/=255;const r=Math.max(t,e,s),o=Math.min(t,e,s);let i,a;const c=(r+o)/2;if(r===o)i=a=0;else{const l=r-o;switch(a=c>.5?l/(2-r-o):l/(r+o),r){case t:i=(e-s)/l+(e<s?6:0);break;case e:i=(s-t)/l+2;break;case s:i=(t-e)/l+4;break}i/=6}return{h:i*360,s:a*100,l:c*100,a:n}}function xc(t){return`hsla(${t.h}, ${t.s}%, ${t.l}%, ${t.a})`}function nr(t,e,s,n){t/=360,e/=100,s/=100;let r,o,i;if(e===0)r=o=i=s;else{const a=function(u,h,d){return d<0&&(d+=1),d>1&&(d-=1),d<.16666666666666666?u+(h-u)*6*d:d<.5?h:d<.6666666666666666?u+(h-u)*(.6666666666666666-d)*6:u},c=s<.5?s*(1+e):s+e-s*e,l=2*s-c;r=a(l,c,t+1/3),o=a(l,c,t),i=a(l,c,t-1/3)}return[r,o,i,n].map(a=>Math.round(a*255))}function rr(t){const e=t.slice(5,-1).split(", "),s=+e.pop(),n=e.map(r=>r.endsWith("%")?+r.slice(0,-1):+r);return nr(n[0],n[1],n[2],s)}function or(t){const e=[],s=t[0]==="#"?1:0;if(t.length===5+s&&(t=(s?"#":"")+"0"+t.slice(s)),t.length===3+s)for(let n=s;n<t.length;++n)e.push(parseInt(t[n]+t[n],16));else if(t.length===4+s){for(let n=s;n<t.length-1;++n)e.push(parseInt(t[n]+t[n],16));e.push(parseInt(t[t.length-1],16))}else for(let n=s;n<t.length;n+=2)e.push(parseInt(t.slice(n,n+2),16));return e}function ce(t){return or(t.slice(0,7))}function Bc(t){const e=or(t);return rs(e[0],e[1],e[2],e[3])}function Re(t){return"#"+t.map(e=>("0"+e.toString(16)).slice(-2)).join("")}function Zi(t){return Re(rr(t))}function Xi(t){return Zi(t).slice(0,-2)}function Nt(t,e,s){const n=new Array(3);for(let r=0;r<3;++r){const o=t[r],i=e[r];n[r]=Math.floor(i+(o-i)*s)}return n}function Gs(t){return(t[0]*.2126+t[1]*.7152+t[2]*.0722)/255}function Qi(t,e){return t.map((s,n)=>Math.round((s+e[n])/2))}function ea(t,e,s){const n=ue(...e),r=ue(...s),o=Math.min(1.5*n[1]/t[1],1);return n[0]=Math.min(360,r[0]-n[0]+t[0]),n[1]=Math.min(1,r[1]*t[1]/n[1]),n[2]=Math.min(1,(r[2]/n[2]+o-1)*t[2]/o),n[2]<.3?s:bs(...n)}function ta(t,e,s,n){const r=ue(...s);if(Math.min(Math.abs(r[0]-t[0]),Math.abs(r[0]-t[0]-360))>30)return s;const o=t[1]?Math.min(1.5*r[1]/t[1],1):0;r[0]=Math.min(360,r[0]+e[0]-t[0]),r[1]=t[1]?Math.min(1,r[1]*e[1]/t[1]):0,r[2]=t[2]?Math.min(1,r[2]*(1-o+o*e[2]/t[2])):0;let i=bs(...r);const a=Gs(s),c=Gs(i);if(n?a>c:a<c){const l=.4*a/c+.6;i=sa(i,l)}return i}function sa(t,e){return t.map(s=>sr(Math.round(s*e),0,255))}function ir(t){const e=(t<0?16777215+t:t).toString(16);return"#"+(e.length>=6?e:"0".repeat(6-e.length)+e)}function tt(t){return ce(ir(t))}function Oc(t){return t.settings?[t.settings.background_color,t.settings.second_background_color,t.settings.third_background_color,t.settings.fourth_background_color].filter(Boolean).map(ir).join(","):""}function Rc(t,e){const s=t[3];return t.slice(0,3).map((n,r)=>sr(Math.round((s*(n/255)+s*(e[r]/255))*255),0,255))}function jc(t){const[e,s,n]=t;return .2126*e/255+.7152*s/255+.0722*n/255}function Nc(t){return t>.5?[0,0,0]:[255,255,255]}function Wc(t,e){const s=t>.5?0:1,n=(t-s+e)/e;return+Math.max(.5,Math.min(.64,n)).toFixed(2)}function ar(t,e,s,n,r=!0){if(t<s&&e<n&&r)return I(t,e);let o=s,i=n;return t/e>s/n?i=e*s/t|0:(o=t*n/e|0,o>s&&(i=i*s/o|0,o=s)),r&&o>=t&&i>=e&&(o=t,i=e),I(o,i)}S.calcImageInBox=ar;class na{constructor(e=0,s=e){this.width=e,this.height=s}aspect(e,s){return ar(this.width,this.height,e.width,e.height,s)}aspectFitted(e){return this.aspect(e,!0)}aspectCovered(e){return this.aspect(e,!1)}}function I(t,e){return new na(t,e)}var ra=(t=>(t[t.mobile=0]="mobile",t[t.medium=1]="medium",t[t.large=2]="large",t))(ra||{});const oa=600,ia=1275,aa=1680,qs=I(20,20),Js=I(36,36),Ks=I(18,18);class ca extends ye{constructor(){super(),this.screenSizes=[{key:0,value:oa},{key:1,value:ia},{key:2,value:aa}],this.sizes={handhelds:{regular:I(340,340),webpage:I(340,200),album:I(340,0),esgSticker:I(68,68),animatedSticker:I(180,180),staticSticker:I(180,180),emojiSticker:I(112,112),poll:I(240,0),round:I(240,240),documentName:I(200,0),invoice:I(340,340),extendedInvoice:I(340,340),customEmoji:qs,esgCustomEmoji:Js,emojiStatus:Ks,popupSticker:I(68,68)},desktop:{regular:I(420,400),webpage:I(420,380),album:I(420,0),esgSticker:I(72,72),animatedSticker:I(200,200),staticSticker:I(200,200),emojiSticker:I(112,112),poll:I(330,0),round:I(280,280),documentName:I(240,0),invoice:I(320,320),extendedInvoice:I(420,400),customEmoji:qs,esgCustomEmoji:Js,emojiStatus:Ks,popupSticker:I(80,80)}},this.isMobile=!1,this.handleResize=()=>{const e=window.innerWidth;let s=this.screenSizes[0].key;for(let r=this.screenSizes.length-1;r>=0;--r)if(this.screenSizes[r].value<e){s=(this.screenSizes[r+1]||this.screenSizes[r]).key;break}const n=this.activeScreen;this.activeScreen=s,this.isMobile=this.activeScreen===0,this.active=this.isMobile?this.sizes.handhelds:this.sizes.desktop,n!==s&&n!==void 0&&this.dispatchEvent("changeScreen",n,s),n!==void 0&&this.dispatchEvent("resize")},window.addEventListener("resize",()=>{this.rAF&&window.cancelAnimationFrame(this.rAF),this.rAF=window.requestAnimationFrame(()=>{this.handleResize(),this.rAF=0})}),this.handleResize()}}const cr=new ca;S.mediaSizes=cr;class ua{constructor(){this.resetCache=()=>{this.computedStyle=void 0;const e=this.cache;this.cache={};for(const s in e)this.getProperty(s)},this.cache={},this.nightElement=document.createElement("div"),this.nightElement.className="night",this.nightElement.style.display="none",document.body.append(this.nightElement),b.addEventListener("theme_changed",this.resetCache),cr.addEventListener("resize",this.resetCache)}getProperty(e,s){const n=this.cache[e],r=s?1:0;if(n!=null&&n[r])return n[r];this.computedStyle??(this.computedStyle=window.getComputedStyle(document.documentElement)),this.nightComputedStyle??(this.nightComputedStyle=window.getComputedStyle(this.nightElement));const o=(s?this.nightComputedStyle:this.computedStyle).getPropertyValue("--"+e).trim();return this.setPropertyCache(e,o,s)}getPropertyAsColor(e){const s=this.getProperty(e);return s[0]==="#"?s:`rgb(${s})`}getPropertyAsSize(e){const s=this.getProperty(e);let n;return s[s.length-1]==="%"||(s.indexOf("rem")?n=+s.replace("rem","")*16:n=+s.replace("px","")),n}setPropertyCache(e,s,n){var r;return((r=this.cache)[e]??(r[e]=[]))[n?1:0]=s}}const os=new ua;S&&(S.customProperties=os);function Zs(...t){const[e,s]=re(...t);return(...n)=>n.length===0?e():s(...n)}class la{constructor(){if(ve)return;this._width=Zs(),this._height=Zs(),this.viewport=window;const e=()=>{this.setDimensions()};this.viewport.addEventListener("resize",e),e()}setDimensions(){const e=this.viewport;this._width(e.width||e.innerWidth),this._height(e.height||e.innerHeight)}get width(){return this._width()}get height(){return this._height()}}const is=new la;S&&(S.windowSize=is);class ha{isEnabled(){return!!(b.settings&&b.settings.liteMode.all)}isAvailable(e){return!!(b.settings&&!b.settings.liteMode.all&&!b.settings.liteMode[e])}}const ur=new ha;S&&(S.liteMode=ur);const Xs={"primary-color":{rgb:!0,light:!0,lightFilled:!0,dark:!0,darkRgb:!0},"message-out-primary-color":{lightFilled:!0,rgb:!0},"surface-color":{rgb:!0},"danger-color":{rgb:!0,light:!0,dark:!0},"primary-text-color":{rgb:!0},"secondary-text-color":{light:!0,lightFilled:!0},"message-background-color":{light:!0,lightFilled:!0,dark:!0,darkFilled:!0},"message-out-background-color":{light:!0,lightFilled:!0,dark:!0,darkFilled:!0,rgb:!0},"saved-color":{lightFilled:!0},"green-color":{}},Wt={day:{"primary-color":"#3390ec","message-out-primary-color":"#5CA853","message-background-color":"#ffffff","surface-color":"#ffffff","danger-color":"#df3f40","primary-text-color":"#000000","secondary-text-color":"#707579","saved-color":"#359AD4","green-color":"#70b768"},night:{"primary-color":"#8774E1","message-out-primary-color":"#8774E1","message-background-color":"#212121","surface-color":"#212121","danger-color":"#ff595a","primary-text-color":"#ffffff","secondary-text-color":"#aaaaaa","saved-color":"#8774E1","green-color":"#5CC85E"}};class da{constructor(){b.addEventListener("theme_change",e=>{this.setTheme(typeof e=="object"?e:void 0)}),b.addEventListener("theme_changed",()=>{this.setWorkerThemeParams()})}setWorkerThemeParams(){b.managers.apiManager.setThemeParams({_:"dataJSON",data:JSON.stringify(this.getThemeParamsForWebView())})}get themeColorElem(){return this._themeColorElem!==void 0?this._themeColorElem:this._themeColorElem=document.head.querySelector('[name="theme-color"]')||null}setThemeColor(e=this.themeColor){e||(e=this.isNight()?"#212121":"#ffffff");const s=this.themeColorElem;s&&s.setAttribute("content",e)}setThemeListener(){try{const e=window.matchMedia("(prefers-color-scheme: dark)"),s=()=>{this.systemTheme=e.matches?"night":"day",b.myId?b.dispatchEvent("theme_change"):this.setTheme()};"addEventListener"in e?e.addEventListener("change",s):"addListener"in e&&e.addListener(s),s()}catch{}}applyHighlightingColor({hsla:e,element:s=document.documentElement}={}){var r;if(!e){e="hsla(85.5319, 36.9171%, 40.402%, .4)";const o=this.getTheme();(r=o.settings)!=null&&r.highlightingColor&&(e=o.settings.highlightingColor)}const n=rr(e);s.style.setProperty("--message-highlighting-color",e),s.style.setProperty("--message-highlighting-color-rgb",n.slice(0,3).join(",")),s.style.setProperty("--message-highlighting-alpha",""+n[3]/255),!pe&&e&&(this.themeColor=Xi(e))}_setTheme(e){var i;const s=this.isNight();(i=document.head.querySelector('[name="color-scheme"]'))==null||i.setAttribute("content",s?"dark":"light"),document.documentElement.classList.toggle("night",s),this.setThemeColor();const n=this.getTheme();this.applyTheme(n);let r=this.styleElement;r||(r=this.styleElement=document.createElement("style"),document.head.append(r));const o=document.createElement("div");this.applyTheme(b.settings.themes.find(a=>a.name==="night"),o,!0),r.textContent=`.night {${o.style.cssText}}`,this.applyHighlightingColor(),!e&&b.dispatchEventSingle("theme_changed")}setTheme(e){if(!("startViewTransition"in document)||!this.applied){const a=!this.applied,c=this.applied;this.applied=!0,this._setTheme(a),c||this.setWorkerThemeParams();return}ur.isAvailable("animations")||(e=void 0);const s=!this.isNight();e&&(document.documentElement.classList.add("no-view-transition"),document.documentElement.classList.toggle("reverse",s),document.documentElement.offsetLeft);const n=document.startViewTransition(()=>{this._setTheme()});if(!e)return;const{x:r,y:o}=e,i=Math.hypot(Math.max(r,is.width-r),Math.max(o,is.height-o));n.ready.then(()=>{document.documentElement.animate({clipPath:[`circle(0 at ${r}px ${o}px)`,`circle(${i}px at ${r}px ${o}px)`]},{duration:500,easing:"ease-in-out",pseudoElement:`::view-transition-${s?"old":"new"}(root)`,direction:s?"reverse":"normal"})}),n.finished.finally(()=>{document.documentElement.classList.remove("no-view-transition","reverse")})}async switchTheme(e,s){await b.managers.appStateManager.setByKey(Vs("settings","theme"),e),b.dispatchEvent("theme_change",s)}isNight(){return this.getTheme().name==="night"}getTheme(e=b.settings.theme==="system"?this.systemTheme:b.settings.theme){return b.settings.themes.find(s=>s.name===e)}bindColorApplier(e){const s=new Set;return{applyAppColor:n=>(s.add(n.name),this.applyAppColor({...n,...e})),finalize:()=>{const n=e.isNight;for(const r in Xs)s.has(r)||this.applyAppColor({name:r,hex:Wt[n?"night":"day"][r],...e})}}}applyAppColor({name:e,hex:s,element:n,lightenAlpha:r=.08,darkenAlpha:o=r,mixColor:i,isNight:a=this.isNight(),saveToCache:c}){const l=Xs[e],u=ce(s),h=rs(...u);i??(i=ce(Wt[a?"night":"day"]["surface-color"]));const d=Nt(u,i,r),v={...h,l:h.l-o*100},w=[[e,s],l.rgb&&[e+"-rgb",u.join(",")],l.light&&["light-"+e,`rgba(${u[0]}, ${u[1]}, ${u[2]}, ${r})`],l.lightFilled&&["light-filled-"+e,Re(d)],l.dark&&["dark-"+e,`hsl(${v.h}, ${v.s}%, ${v.l}%)`]];c??(c=n===document.documentElement),w.filter(Boolean).forEach(([p,f])=>{n.style.setProperty("--"+p,f),c&&os.setPropertyCache(p,f,a)})}async applyNewTheme(e){const s=this.isNightTheme(e),n=this.getTheme(),r=b.settings.themes,o=e.settings.find(a=>a.base_theme._===(s?"baseThemeNight":"baseThemeClassic")),i={...e,name:n.name,settings:{...o,highlightingColor:""}};await this.AppBackgroundTab.setBackgroundDocument(o.wallpaper,i.settings),r[r.indexOf(n)]=i,await b.managers.appStateManager.setByKey(Vs("settings","themes"),b.settings.themes),b.dispatchEvent("theme_change")}isNightTheme(e){return e.name==="night"||this.isNight()}getThemeSettings(e,s){return s??(s=this.isNightTheme(e)),Array.isArray(e.settings)?e.settings.find(n=>n.base_theme._===(s?"baseThemeNight":"baseThemeClassic")):e.settings}applyTheme(e,s=document.documentElement,n){var P;const r=this.isNightTheme(e),o=this.getThemeSettings(e,r),i=Wt[r?"night":"day"];let a=ue(...ce(i["primary-color"])),c=ue(...tt(o.accent_color));const l=ta(a,c,ce(i["primary-color"]),!r),u=Re(l),{applyAppColor:h,finalize:d}=this.bindColorApplier({element:s,isNight:r,saveToCache:n});if(h({name:"primary-color",hex:u,darkenAlpha:.04}),h({name:"saved-color",hex:u,lightenAlpha:.64,mixColor:[255,255,255]}),!((P=o.message_colors)!=null&&P.length))return;const v=r?1:.12,w=ce(i["message-out-primary-color"]);a=ue(...w);const p=Nt(w,ce(i["surface-color"]),v);let f=tt(o.message_colors[0]);o.message_colors.length>1&&(o.message_colors.slice(1).forEach(C=>{f=Qi(f,tt(C))}),f=ea(a,p,f)),c=ue(...f);const k=o.outbox_accent_color!==void 0&&ue(...tt(o.outbox_accent_color));let A=Nt(f,ce(i["surface-color"]),v);if(!r){const C=rs(...A);C.s=Math.min(C.s+(r?8:63),100),A=nr(C.h,C.s,C.l,C.a).slice(0,3)}h({name:"message-out-background-color",hex:Re(A),lightenAlpha:v}),h({name:"message-out-primary-color",hex:r?"#ffffff":Re(k?bs(...k):f),mixColor:A}),d()}getThemeParamsForWebView(){const e={bg_color:"surface-color",button_color:"primary-color",button_text_color:"#ffffff",hint_color:"secondary-text-color",link_color:"link-color",secondary_bg_color:"background-color-true",text_color:"primary-text-color",header_bg_color:"surface-color",accent_text_color:"primary-color",section_bg_color:"surface-color",section_header_text_color:"primary-color",subtitle_text_color:"secondary-text-color",destructive_text_color:"danger-color"},s={};for(const n in e){const r=e[n];s[n]=r[0]==="#"?r:os.getProperty(r)}return s}}const lr=new da;S&&(S.themeController=lr);class ga extends ye{constructor(){super(...arguments),this.overlaysActive=0,this.hasDarkOverlays=0}get isOverlayActive(){return this.overlaysActive>0}set isOverlayActive(e){this.overlaysActive+=e?1:-1,this.dispatchEvent("change",this.isOverlayActive)}get isDarkOverlayActive(){return this.hasDarkOverlays>0}set isDarkOverlayActive(e){this.hasDarkOverlays+=e?1:-1,this.isOverlayActive=e}}const ct=new ga;S&&(S.overlayCounter=ct);function Uc(t,e=t.split("?")){return hr(e==null?void 0:e[1])}function hr(t){const e={};return t&&t.split("&").forEach(s=>{const[n,r=""]=s.split("=");e[n]=decodeURIComponent(r)}),e}const ma="onbeforeinstallprompt"in window;let as;function Da(){window.addEventListener("beforeinstallprompt",t=>{as=async()=>{t.prompt();const{outcome:e}=await t.userChoice;e==="accepted"&&(as=void 0)}})}function zc(){return as}const ws=["January","February","March","April","May","June","July","August","September","October","November","December"],pa=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Ve=ws.slice(),cs=pa.slice(),Se=86400,Vc=1440,Hc=10080;function fa(){const t=N.getDateTimeFormat({weekday:"long"}),e=new Date(Date.UTC(2017,0,2)),s=[];for(let n=0;n<7;++n)s.push(Et(t.format(e))),e.setDate(e.getDate()+1);return s}function va(){const t=N.getDateTimeFormat({month:"long"}),e=new Date(Date.UTC(2017,0,1)),s=[];for(let n=0;n<12;++n)s.push(Et(t.format(e))),e.setMonth(e.getMonth()+1);return s}function Qs(){Ve.splice(0,Ve.length,...va()),cs.splice(0,cs.length,...fa())}const en=t=>{const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),s=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-s);const n=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-n.getTime())/Se+1)/7)};function Yc(t,e){e||(e=new Date,e.setHours(0,0,0,0));const s={day:"numeric",month:"long"};return t.getFullYear()!==e.getFullYear()&&(s.year="numeric"),new N.IntlDateElement({date:t,options:s}).element}function Fa(t){const e=new Date,s=e.getTime()/1e3|0,n=t.getTime()/1e3|0,r={};return s-n<Se&&e.getDate()===t.getDate()?r.hour=r.minute="2-digit":e.getFullYear()!==t.getFullYear()?(r.year=r.day="numeric",r.month="2-digit"):s-n<Se*7&&en(e)===en(t)?r.weekday="short":(r.month="short",r.day="numeric"),new N.IntlDateElement({date:t,options:r}).element}const us={hour:"2-digit",minute:"2-digit"};function ya(t,e={}){e.combined&&(e.noToday=!0);const s=new Date,n=new Date(t*1e3),r=(s.getTime()/1e3|0)-t,o=e.combined?void 0:ba(n);let i;return!e.noToday&&r<Se&&s.getDate()===n.getDate()?i=We(e.capitalize?"Date.Today":"Peer.Status.Today"):!e.noToday&&r>0&&r<Se*2&&new Date(s.getTime()-Se*1e3).getDate()===n.getDate()?(i=We(e.capitalize?"Yesterday":"Peer.Status.Yesterday"),e.capitalize&&(i.style.textTransform="capitalize")):s.getFullYear()!==n.getFullYear()?i=new N.IntlDateElement({date:n,options:{month:"short",day:"numeric",year:"numeric",...e.combined?us:{}}}).element:i=new N.IntlDateElement({date:n,options:{month:"short",day:"numeric",...e.combined?us:{}}}).element,{dateEl:i,timeEl:o}}function $c(t,e=!0,s=!1){const{dateEl:n,timeEl:r}=ya(t,{capitalize:e,noToday:s}),o=document.createDocumentFragment();return o.append(n," ",We("ScheduleController.at")," ",r),o}function ba(t){return new N.IntlDateElement({date:t,options:us}).element}S&&(S.formatDateAccordingToTodayNew=Fa);const Gc=(t,e={})=>{const s=e.monthAsNumber?".":" ",n=("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+(e.noSeconds?"":":"+("0"+t.getSeconds()).slice(-2)),r=t.getFullYear();return(e.leadingZero?("0"+t.getDate()).slice(-2):t.getDate())+s+(e.monthAsNumber?("0"+(t.getMonth()+1)).slice(-2):ws[t.getMonth()])+s+(""+r).slice(e.shortYear?2:0)+(e.noTime?"":", "+n)};function qc(t,e){const s=t>=12&&!(t%12);return We(e?s?"BoldYears":"BoldMonths":s?"Years":"Months",[s?t/12:t])}const Q=2013,wa=new RegExp("20[0-9]{1,2}"),Es="\\p{L}",Ea=new RegExp(`(${Es}{3,})`,"iu"),Aa=new RegExp(`(${Es}{3,}) ([0-9]{0,4})`,"iu"),Ca=new RegExp(`([0-9]{0,4}) (${Es}{2,})`,"iu"),ka=new RegExp("^([0-9]{1,4})(\\.| |/|\\-)([0-9]{1,4})$","i"),Sa=new RegExp("^([0-9]{1,2})(\\.| |/|\\-)([0-9]{1,2})(\\.| |/|\\-)([0-9]{1,4})$","i"),Pa=[31,29,31,30,31,30,31,31,30,31,30,31];function _a(t,e){const s=t.trim().toLowerCase();if(s.length<3)return;if(["today",N.format("Peer.Status.Today",!0)].some(o=>o.indexOf(s)===0)){const o=new Date,i=o.getFullYear(),a=o.getMonth(),c=o.getDate();o.setFullYear(i,a,c),o.setHours(0,0,0);const l=o.getTime();o.setFullYear(i,a,c+1),o.setHours(0,0,0);const u=o.getTime()-1;e.push({title:N.format("Date.Today",!0),minDate:l,maxDate:u});return}if(["yesterday",N.format("Peer.Status.Yesterday",!0)].some(o=>o.indexOf(s)===0)){const o=new Date,i=o.getFullYear(),a=o.getMonth(),c=o.getDate();o.setFullYear(i,a,c),o.setHours(0,0,0);const l=o.getTime()-864e5;o.setFullYear(i,a,c+1),o.setHours(0,0,0);const u=o.getTime()-86400001;e.push({title:Et(N.format("Yesterday",!0)),minDate:l,maxDate:u});return}const n=La(s);if(n>=0){const o=new Date,i=o.getTime(),a=o.getDay(),c=n-a;o.setDate(o.getDate()+c),o.getTime()>i&&o.setTime(o.getTime()-6048e5);const l=o.getFullYear(),u=o.getMonth(),h=o.getDate();o.setFullYear(l,u,h),o.setHours(0,0,0);const d=o.getTime();o.setFullYear(l,u,h+1),o.setHours(0,0,0);const v=o.getTime()-1;e.push({title:gr(d),minDate:d,maxDate:v});return}let r;if((r=ka.exec(s))!==null){const o=r[1],i=r[3],a=parseInt(o),c=parseInt(i);if(a>0&&a<=31){if(c>=Q&&a<=12){const l=c,u=a-1;xe(e,u,l);return}else if(c<=12){const l=a-1,u=c-1;Ut(e,l,u)}}else if(a>=Q&&c<=12){const l=a,u=c-1;xe(e,u,l)}return}if((r=Sa.exec(s))!==null){const o=r[1],i=r[3],a=r[5];if(!r[2]===r[4])return;const c=parseInt(o),l=parseInt(i)-1;let u=parseInt(a);u>=10&&u<=99&&(u+=2e3);const h=new Date().getFullYear();if(mr(c-1,l)&&u>=Q&&u<=h){const d=new Date;d.setFullYear(u,l,c),d.setHours(0,0,0);const v=d.getTime();d.setFullYear(u,l,c+1),d.setHours(0,0,0);const w=d.getTime()-1;e.push({title:dr(v),minDate:v,maxDate:w});return}return}if((r=Aa.exec(s))!==null){const o=r[1],i=r[2],a=zt(o);if(a>=0){const c=+i||new Date().getUTCFullYear();if(c>0&&c<=31){const l=c-1;Ut(e,l,a);return}else if(c>=Q){xe(e,a,c);return}}}if((r=Ca.exec(s))!==null){const o=r[1],i=r[2],a=zt(i);if(a>=0){const c=+o;if(c>0&&c<=31){const l=c-1;Ut(e,l,a);return}else c>=Q&&xe(e,a,c)}}if((r=Ea.exec(s))!==null){const o=r[1],i=zt(o);if(i>=0){const a=new Date().getFullYear();for(let c=a;c>=Q;--c)xe(e,i,c)}}if((r=wa.exec(s))!==null){let o=+r[0];const i=new Date().getFullYear();if(o<Q){o=Q;for(let a=i;a>=o;a--){const c=new Date;c.setFullYear(a,0,1),c.setHours(0,0,0);const l=c.getTime();c.setFullYear(a+1,0,1),c.setHours(0,0,0);const u=c.getTime()-1;e.push({title:""+a,minDate:l,maxDate:u})}}else if(o<=i){const a=new Date;a.setFullYear(o,0,1),a.setHours(0,0,0);const c=a.getTime();a.setFullYear(o+1,0,1),a.setHours(0,0,0);const l=a.getTime()-1;e.push({title:""+o,minDate:c,maxDate:l})}return}}function xe(t,e,s){const n=new Date().getFullYear(),r=Date.now();if(s>=Q&&s<=n){const o=new Date;o.setFullYear(s,e,1),o.setHours(0,0,0);const i=o.getTime();if(i>r)return;o.setMonth(o.getMonth()+1);const a=o.getTime()-1;t.push({title:Ta(i),minDate:i,maxDate:a})}}function Ut(t,e,s){if(mr(e,s)){const n=new Date().getFullYear(),r=Date.now();for(let o=n;o>=Q;o--){if(s===1&&e===28&&!Ma(o))continue;const i=new Date;i.setFullYear(o,s,e+1),i.setHours(0,0,0);const a=i.getTime();if(a>r)continue;i.setFullYear(o,s,e+2),i.setHours(0,0,0);const c=i.getTime()-1;o===n?t.push({title:Ia(a),minDate:a,maxDate:c}):t.push({title:dr(a),minDate:a,maxDate:c})}}}function Ta(t){const e=new Date(t);return Ve[e.getMonth()]+" "+e.getFullYear()}function Ia(t){const e=new Date(t);return Ve[e.getMonth()]+" "+e.getDate()}function dr(t){const e=new Date(t);return("0"+e.getDate()).slice(-2)+"."+("0"+(e.getMonth()+1)).slice(-2)+"."+e.getFullYear()}function gr(t){const e=new Date(t);return cs[e.getDay()]}function mr(t,e){return e>=0&&e<12&&t>=0&&t<Pa[e]}function Ma(t){return t%4===0&&t%100!==0||t%400===0}function zt(t){t=t.toLowerCase();for(let e=0;e<12;e++)if([ws[e],Ve[e]].some(s=>s.toLowerCase().indexOf(t)===0))return e;return-1}function La(t){const e=new Date;if(t.length<=3)return-1;for(let s=0;s<7;s++)if(e.setDate(e.getDate()+1),gr(e.getTime()).toLowerCase().indexOf(t)===0)return e.getDay();return-1}S.fillTipDates=_a;const Dr=ie,pr=ie||!rn&&(!Z||He)||on<113,xa=!Dr&&!pr;On.then(t=>{t.forEach(e=>{Ue.add(e),jn.add(e)}),console.log("Supported image mime types",Ue),qe.sendEnvironment()});document.addEventListener("DOMContentLoaded",async()=>{try{j.isMainDomain&&document.referrer&&/(^|\.)(google|bing|duckduckgo|ya|yandex)\./i.test(new URL(document.referrer).host)&&(localStorage.getItem("kz_version")==="Z"||bt(8)>127?(localStorage.setItem("kz_version","Z"),location.href="https://web.telegram.org/a/"):localStorage.setItem("kz_version","K"))}catch{}Lr(),Node.prototype.replaceChildren===void 0&&(Node.prototype.replaceChildren=function(...p){this.textContent="",p&&this.append(...p)}),b.managers=Ki();const t=document.getElementById("manifest");t&&(t.href=`site${Ht&&!Pe?"_apple":""}.webmanifest?v=jw3mK7G9Aq`),Ft.start();const e=window.visualViewport||window;let s=!1,n;const r=()=>{let p=(s&&!ct.isOverlayActive?e.height||e.innerHeight:window.innerHeight)*.01;p=+p.toFixed(2),n!==p&&(pe&&n<p&&p-n>1&&sn(),n=p,document.documentElement.style.setProperty("--vh",`${p}px`))};window.addEventListener("resize",r),r();const o=()=>{const p=document.querySelector(".chat.active");if(!p)return;const f=p.cloneNode(!0);f.querySelectorAll(".chat-input, .chat-background").forEach(C=>C.remove());const k=f.querySelector(".bubbles"),A=k.querySelector(".bubbles-inner");k.replaceChildren(A),k.querySelectorAll("video").forEach(C=>C.muted=!0);const P=document.createElement("div");P.setAttribute("id","printable"),P.append(f),document.body.append(P)},i=()=>{var p;(p=document.getElementById("printable"))==null||p.remove()};if(window.addEventListener("beforeprint",o),window.addEventListener("afterprint",i),ut){const p=()=>{s=f===1&&ut&&!ct.isOverlayActive,r(),e!==window&&(s?(window.removeEventListener("resize",r),e.addEventListener("resize",r)):(e.removeEventListener("resize",r),window.addEventListener("resize",r)))};let f;window.onImTabChange=k=>{const A=f!==void 0;f=k,(A||f===1)&&p()},ct.addEventListener("change",()=>{p()})}_e&&!$t&&document.addEventListener("dragstart",p=>{const f=p.target;if(f.tagName==="IMG"&&f.classList.contains("emoji"))return Vt(p),!1}),$t&&document.documentElement.classList.add("native-emoji"),Dr?document.documentElement.classList.add("native-scroll"):pr?document.documentElement.classList.add("overlay-scroll"):xa&&document.documentElement.classList.add("custom-scroll"),document.addEventListener("dragstart",p=>{var f;if(((f=p.target)==null?void 0:f.tagName)==="IMG")return p.preventDefault(),!1}),document.addEventListener("contextmenu",p=>{p.target.tagName==="IMG"&&!window.appMediaViewer&&Vt(p)}),_e&&document.documentElement.classList.add("is-firefox","no-backdrop"),ie&&document.documentElement.classList.add("is-mobile"),Ht?(Z&&document.documentElement.classList.add("is-safari"),Pe?document.documentElement.classList.add("is-ios"):document.documentElement.classList.add("is-mac")):nn&&document.documentElement.classList.add("is-android"),pe?document.documentElement.classList.add("is-touch"):document.documentElement.classList.add("no-touch"),ma&&Da();const a=performance.now(),c=N.getCacheLangPack(),[l,u]=await Promise.all([qe.sendState().then(([p])=>p),c]);N.setTimeFormat(l.state.settings.timeFormat),b.managers.rootScope.getPremium().then(p=>{b.premium=p}),lr.setThemeListener(),u.appVersion!==j.langPackVersion?N.getLangPack(u.lang_code):Qs(),b.addEventListener("language_change",()=>{Qs()});function h(p,f){p.style.opacity="0",f.then(()=>{window.requestAnimationFrame(()=>{p.style.opacity=""})})}console.log("got state, time:",performance.now()-a),await On,u.lang_code==="ar"||u.lang_code==="fa"&&Nr&&!1?(document.documentElement.classList.add("is-rtl"),document.documentElement.dir="rtl",document.documentElement.lang=u.lang_code,N.setRTL(!0)):document.documentElement.dir="ltr";let d=l.state.authState;const v=location.hash.split("?"),w=hr(v[1]??v[0].slice(1));if(w.tgWebAuthToken&&d._!=="authStateSignedIn"){const p={token:w.tgWebAuthToken,dcId:+w.tgWebAuthDcId,userId:w.tgWebAuthUserId.toUserId(),isTest:w.tgWebAuthTest!==void 0&&!!+w.tgWebAuthTest,tgAddr:w.tgaddr};if(p.isTest!==$.test){const f=new URLSearchParams(location.search);+w.tgWebAuthTest?f.set("test","1"):f.delete("test"),location.search=f.toString();return}b.managers.appStateManager.pushToState("authState",d={_:"authStateSignImport",data:p})}if(d._!=="authStateSignedIn"){console.log("Will mount auth page:",d._,Date.now()/1e3);const p=document.getElementById("auth-pages");let f;if(p){f=p.querySelector(".scrollable"),(!pe||He)&&f.classList.add("no-scrollbar"),f.style.opacity="0";const A=document.createElement("div");A.classList.add("auth-placeholder"),f.prepend(A),f.append(A.cloneNode())}try{await Promise.all([z(()=>Promise.resolve().then(()=>Zo),void 0,import.meta.url),z(()=>Promise.resolve().then(()=>qo),void 0,import.meta.url)]).then(([A,P])=>{A.default.setAuthorized(!1),P.default.forceUnsubscribe()})}catch{}let k;switch(d._){case"authStateSignIn":k=(await z(()=>Y(()=>import("./pageSignIn-B-PYLplq-KiaYOeAk.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])),me([0,1,2,3,4,5,6,7,8]),import.meta.url)).default.mount();break;case"authStateSignQr":k=(await z(()=>Y(()=>import("./pageSignQR-DljwMMf8-Cr_aBgz1.js"),__vite__mapDeps([7,2,4,1,8])).then(A=>A.a),me([7,2,4,1,8]),import.meta.url)).default.mount();break;case"authStateAuthCode":k=(await z(()=>Y(()=>import("./pageAuthCode-BYy_YHRR-CJe_iUCX.js"),__vite__mapDeps([9,2,0,1,3,4,5,6,7,8,10])),me([9,2,0,1,3,4,5,6,7,8,10]),import.meta.url)).default.mount(d.sentCode);break;case"authStatePassword":k=(await z(()=>Y(()=>import("./pagePassword-BBck6_oH-C0f6p0tu.js"),__vite__mapDeps([11,1,2,4,12,5,13])),me([11,1,2,4,12,5,13]),import.meta.url)).default.mount();break;case"authStateSignUp":k=(await z(()=>Y(()=>import("./pageSignUp-CKGI2k20-JRNSNSTL.js"),__vite__mapDeps([14,13,2,5,4,15,6,1])),me([14,13,2,5,4,15,6,1]),import.meta.url)).default.mount(d.authCode);break;case"authStateSignImport":k=(await z(()=>Y(()=>import("./pageSignImport-Br1RvrN4-BnemDTql.js"),__vite__mapDeps([16,1,2])),me([16,1,2]),import.meta.url)).default.mount(d.data);break}if(f){k&&await k;const A="fonts"in document?Promise.race([hs(1e3),document.fonts.ready]):Promise.resolve();h(f,A)}}else console.log("Will mount IM page:",Date.now()/1e3),h(document.getElementById("main-columns"),Ir()),(await z(()=>Y(()=>import("./pageIm-B4GzUrmM-D9QjBKom.js"),__vite__mapDeps([17,2])),me([17,2]),import.meta.url)).default.mount()});export{Jn as $,ln as A,O as B,Gt as C,Ne as D,is as E,ye as F,We as G,ee as H,ds as I,Z as J,Ki as K,jr as L,gi as M,st as N,Rr as O,Oa as P,ac as Q,es as R,b as S,Or as T,N as U,z as V,Fa as W,qe as X,$o as Y,vi as Z,Y as _,Ce as a,Cc as a$,Kn as a0,Yc as a1,bn as a2,Va as a3,Bi as a4,xr as a5,He as a6,ct as a7,Sc as a8,Ht as a9,Vs as aA,zc as aB,_a as aC,Ko as aD,hi as aE,yt as aF,Ft as aG,vt as aH,os as aI,ie as aJ,Mn as aK,_i as aL,Uc as aM,Lt as aN,_e as aO,Ze as aP,si as aQ,rn as aR,Se as aS,yn as aT,Ba as aU,Vi as aV,ft as aW,Zn as aX,Ka as aY,Za as aZ,kc as a_,pn as aa,U as ab,_r as ac,Pr as ad,Sr as ae,Do as af,Wa as ag,ya as ah,ba as ai,jt as aj,bt as ak,Xa as al,I as am,kr as an,jn as ao,Qa as ap,ar as aq,ls as ar,wc as as,yc as at,bc as au,Hi as av,lr as aw,_c as ax,ec as ay,ti as az,V as b,Bs as b$,Bc as b0,za as b1,Ya as b2,Ua as b3,sr as b4,ho as b5,$c as b6,Po as b7,ii as b8,le as b9,Br as bA,Ec as bB,qc as bC,ao as bD,Yo as bE,$a as bF,Mc as bG,rs as bH,Ja as bI,an as bJ,zn as bK,Jt as bL,Na as bM,ut as bN,ja as bO,_s as bP,dc as bQ,vc as bR,Dc as bS,lc as bT,or as bU,Nc as bV,oi as bW,ir as bX,Fe as bY,Nt as bZ,nn as b_,hc as ba,J as bb,$t as bc,Pe as bd,Bo as be,Ga as bf,lo as bg,Ac as bh,Oc as bi,Zs as bj,Ue as bk,Fs as bl,ro as bm,fn as bn,na as bo,ui as bp,mo as bq,qa as br,li as bs,Io as bt,gc as bu,ce as bv,Wc as bw,Rc as bx,ps as by,to as bz,ne as c,Lc as c0,Ic as c1,rc as c2,Fc as c3,xc as c4,fa as c5,Ns as c6,Kt as c7,cc as c8,fc as c9,tc as ca,mc as cb,nr as cc,Re as cd,jc as ce,nc as cf,Vc as cg,Hc as ch,Mi as ci,uc as cj,pr as ck,ei as cl,di as cm,Qo as cn,Vn as co,oc as cp,Bn as cq,_n as cr,sc as cs,hn as ct,xi as cu,ji as cv,ic as cw,Fn as cx,cn as cy,S as d,co as e,rt as f,pe as g,ra as h,cr as i,Cr as j,Ra as k,lt as l,fe as m,Gc as n,ur as o,hs as p,Yt as q,Xo as r,sn as s,Ha as t,re as u,Pc as v,Ir as w,j as x,Tc as y,Vt as z};
