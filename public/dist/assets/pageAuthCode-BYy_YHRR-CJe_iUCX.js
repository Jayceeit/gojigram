const __vite__fileDeps=["assets/pageIm-B4GzUrmM-D9QjBKom.js","assets/index-p16BOqnp.js","assets/index-B8jL9cEs.css","assets/page-VE9OcG0U-aQMl6CMd.js","assets/pageSignUp-CKGI2k20-JRNSNSTL.js","assets/loginPage-fFfFEVsO-BAL91Mrr.js","assets/wrapEmojiText-DJXpRYaz-DsSuZO2C.js","assets/button-BD6I5F21-BCIxP22E.js","assets/avatar-BygOGLJ2-VrvUKNFE.js","assets/scrollable-DoUmbSw--CLoL6L-W.js","assets/putPreloader-BTYVD0HY-Cj27QpTZ.js","assets/pagePassword-BBck6_oH-C0f6p0tu.js","assets/htmlToSpan-CWT7jaQY-DLinxisR.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{y as f,e as v,G as E,S as g,V as u,_,i as D}from"./index-p16BOqnp.js";import{z as O,_ as T}from"./page-VE9OcG0U-aQMl6CMd.js";import w from"./pageSignIn-B-PYLplq-KiaYOeAk.js";import{m as P,d as j}from"./codeInputField-DJ7B9Vyw-g-D0bfJF.js";import{M as b,p as C}from"./wrapEmojiText-DJXpRYaz-DsSuZO2C.js";import{j as k}from"./button-BD6I5F21-BCIxP22E.js";import"./putPreloader-BTYVD0HY-Cj27QpTZ.js";import"./scrollable-DoUmbSw--CLoL6L-W.js";import"./pageSignQR-DljwMMf8-Cr_aBgz1.js";import"./countryInputField-Dd2coeyi-CrWpF_Pz.js";import"./textToSvgURL-Cnw_Q8Rw-CS9KuXZv.js";const I=["./pageIm-B4GzUrmM.js","./index-Bk6w0QSK.js","./index-jdz_mo9Z.css","./page-VE9OcG0U.js","./pageSignUp-CKGI2k20.js","./loginPage-fFfFEVsO.js","./wrapEmojiText-DJXpRYaz.js","./button-BD6I5F21.js","./avatar-BygOGLJ2.js","./scrollable-DoUmbSw-.js","./putPreloader-BTYVD0HY.js","./pagePassword-BBck6_oH.js","./htmlToSpan-CWT7jaQY.js"],c=t=>t.map(n=>I[n]);let i=null,h=null,S=null,s,r,o,l;const y=()=>{setTimeout(()=>{o==null||o.remove(),l==null||l.remove()},300)},A=t=>{s.setAttribute("disabled","true");const n={phone_number:i.phone_number,phone_code_hash:i.phone_code_hash,phone_code:t};g.managers.apiManager.invokeApi("auth.signIn",n,{ignoreErrors:!0}).then(async e=>{switch(e._){case"auth.authorization":await g.managers.apiManager.setUser(e.user),u(()=>_(()=>import("./pageIm-B4GzUrmM-D9QjBKom.js"),__vite__mapDeps([0,1,2,3])),c([0,1,2,3]),import.meta.url).then(a=>{a.default.mount()}),y();break;case"auth.authorizationSignUpRequired":u(()=>_(()=>import("./pageSignUp-CKGI2k20-JRNSNSTL.js"),__vite__mapDeps([4,1,2,5,3,6,7,8,9,10])),c([4,1,2,5,3,6,7,8,9,10]),import.meta.url).then(a=>{a.default.mount({phone_number:i.phone_number,phone_code_hash:i.phone_code_hash})}),y();break}}).catch(async e=>{let a=!1;switch(e.type){case"SESSION_PASSWORD_NEEDED":a=!0,e.handled=!0,await(await u(()=>_(()=>import("./pagePassword-BBck6_oH-C0f6p0tu.js"),__vite__mapDeps([11,1,2,10,3,7,12,6,5])),c([11,1,2,10,3,7,12,6,5]),import.meta.url)).default.mount(),setTimeout(()=>{s.value=""},300);break;case"PHONE_CODE_EXPIRED":s.classList.add("error"),b(r.label,E("PHONE_CODE_EXPIRED"));break;case"PHONE_CODE_EMPTY":case"PHONE_CODE_INVALID":s.classList.add("error"),b(r.label,E("PHONE_CODE_INVALID"));break;default:r.label.innerText=e.type;break}a||r.select(),s.removeAttribute("disabled")})},L=()=>{m.pageEl.querySelector(".input-wrapper").append(r.container);const t=m.pageEl.querySelector(".phone-edit");t.append(k("edit")),T(t,()=>w.mount())},N=()=>{const t=m.pageEl.querySelector(".auth-image"),n=D.isMobile?100:166;if(i.type._==="auth.sentCodeTypeFragmentSms"){t.firstElementChild&&(o==null||o.remove(),o=void 0,t.replaceChildren());const e=document.createElement("div");return e.classList.add("media-sticker-wrapper"),t.append(e),C.loadAnimationAsAsset({container:e,loop:!0,autoplay:!0,width:n,height:n},"jolly_roger").then(a=>(l=a,C.waitForFirstFrame(a))).then(()=>{})}else return t.firstElementChild&&(l==null||l.remove(),l=void 0,t.replaceChildren()),o=new j(r,n),t.append(o.container),o.load()},m=new O("page-authCode",!0,L,t=>{if(i=t,!h)h=m.pageEl.getElementsByClassName("phone")[0],S=m.pageEl.getElementsByClassName("sent-type")[0];else{s.value="";const p=document.createEvent("HTMLEvents");p.initEvent("input",!1,!0),s.dispatchEvent(p)}const n=i.type.length;r||(r=new P({label:"Code",name:f(),length:n,onFill:p=>{A(p)}}),s=r.input),r.options.length=n,h.innerText=i.phone_number;let e,a;const d=i.type;switch(d._){case"auth.sentCodeTypeSms":e="Login.Code.SentSms";break;case"auth.sentCodeTypeApp":e="Login.Code.SentInApp";break;case"auth.sentCodeTypeCall":e="Login.Code.SentCall";break;case"auth.sentCodeTypeFragmentSms":e="PhoneNumber.Code.Fragment.Info";const p=document.createElement("a");v(p),p.href=d.url,a=[p];break;default:e="Login.Code.SentUnknown",a=[d._];break}return b(S,E(e,a)),g.managers.appStateManager.pushToState("authState",{_:"authStateAuthCode",sentCode:t}),N().catch(()=>{})},()=>{s.focus()});export{m as default};
