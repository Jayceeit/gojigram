import{F as mt,c as U,d as ut,D as B,p as ft,o as J,k as ht,g as vt,q as z,z as gt,U as pt}from"./index-p16BOqnp.js";const M=new mt,_="start",V="end";let O=!1,T=U(),x=0;T.resolve();const q=console.log.bind(console.log,"[HEAVY-ANIMATION]:");function K(t,e){O||(T=U(),M.dispatchEvent(_),O=!0,B&&q("start")),++x,B&&q("attach promise, length:",x,e);const n=[e!==void 0?ft(e):void 0,t.finally(()=>{})].filter(Boolean),r=performance.now(),s=T;return Promise.race(n).then(()=>{T!==s||T.isFulfilled||(--x,B&&q("promise end, length:",x,performance.now()-r),x<=0&&tt())}),T}window.dispatchHeavyAnimationEvent=K;function tt(){T.isFulfilled||(O=!1,x=0,M.dispatchEvent(V),T.resolve(),B&&q("end"))}function Bt(){tt()}function qt(){return T}function Ht(t,e,n){O&&t();const r=n?n.add(M):M.addEventListener.bind(M),s=n?n.removeManual.bind(n,M):M.removeEventListener.bind(M);return r(_,t),r(V,e),()=>{s(V,e),s(_,t)}}function W(t,e){if(!(t!=null&&t.parentNode))return-1;if(e)return Array.from(t.parentNode.childNodes).indexOf(t);let n=0;for(;(t=t.previousElementSibling)!==null;)++n;return n}function A(t,e){return pt.isRTL&&(t=-t),`translate3d(${t}px, ${e}px, 0)`}const bt={callback:(t,e,n)=>{const r=e.getBoundingClientRect().width,s=[t,e];return n&&s.reverse(),s[0].style.filter="brightness(80%)",s[0].style.transform=A(-r*.25,0),s[1].style.transform=A(r,0),t.classList.add("active"),t.offsetWidth,t.style.transform="",t.style.filter="",()=>{e.style.transform=e.style.filter=""}},animateFirst:!1},yt={callback:(t,e,n)=>{const r=e.getBoundingClientRect().width,s=[t,e];return n&&s.reverse(),s[0].style.transform=A(-r,0),s[1].style.transform=A(r,0),t.classList.add("active"),t.offsetWidth,t.style.transform="",()=>{e.style.transform=""}},animateFirst:!1},Lt={callback:(t,e,n)=>{const r=e.getBoundingClientRect().width,s=[t,e],u=["slide-right","slide-left"];return n&&(s.reverse(),u.reverse()),s[0].style.transform=A(-r,0),s[1].style.transform=A(r,0),t.classList.add("active",u[0]),e.classList.add(u[1]),t.offsetWidth,t.style.transform="",t.classList.remove(u[0]),()=>{e.style.transform="",e.classList.remove(u[1])}},animateFirst:!1},wt={navigation:bt,premiumTabs:Lt,tabs:yt},Et=t=>{let{content:e,type:n,transitionTime:r,onTransitionEnd:s,onTransitionStart:u,onTransitionStartAfter:f,isHeavy:y=!0,once:F=!1,withAnimationListener:D=!0,listenerSetter:b,animateFirst:k=!1}=t;const{callback:g,animateFirst:m}=wt[n]||{};e.dataset.animation=n,m!==void 0&&(k=m);const o=new Map;let p,a=null;if(D){const c=g?"transitionend":"animationend",l=v=>{var L;gt(v),!(v.target.parentElement!==e||((L=o.get(v.target))==null||L(),v.target!==a))&&(!p&&y||(p&&(p.resolve(),p=void 0),s==null||s(h.prevId()),e.classList.remove("animating","backwards","disable-hover"),F&&(b?b.removeManual(e,c,l):e.removeEventListener(c,l),a=p=void 0,o.clear())))};b?b.add(e)(c,l):e.addEventListener(c,l)}function h(c,l=!0,v){var C;v&&(a=v),c instanceof HTMLElement&&(c=W(c));const L=h.prevId();if(c===L)return!1;u==null||u(c);const d=e.children[c];if((!J.isAvailable("animations")||L===-1&&!k)&&(l=!1),!D){const i=e.dataset.timeout;i!==void 0&&clearTimeout(+i),delete e.dataset.timeout}if(!l){a?a.classList.remove("active","to","from"):d&&((C=o.get(d))==null||C()),d&&(d.classList.remove("to","from"),d.classList.add("active")),e.classList.remove("animating","backwards","disable-hover"),a=d,s==null||s(c);return}D||(e.dataset.timeout=""+window.setTimeout(()=>{d.classList.remove("to"),a&&a.classList.remove("from"),e.classList.remove("animating","backwards","disable-hover"),delete e.dataset.timeout},r)),a&&(a.classList.remove("to"),a.classList.add("from")),e.classList.add("animating");const P=L<c;e.classList.toggle("backwards",!P);let E;if(d&&(g?E=g(d,a,P):d.classList.add("active"),f==null||f(c),d.classList.remove("from"),d.classList.add("to")),d){const i=d.dataset.transitionTimeout;i&&clearTimeout(+i),o.set(d,()=>{d.classList.remove("to"),o.delete(d)})}if(a){let i;const w=a,R=()=>{clearTimeout(i),w.classList.remove("active","from"),E==null||E(),o.delete(w)};d?(i=window.setTimeout(R,r+100),o.set(w,R)):(i=window.setTimeout(R,r+100),o.set(w,()=>{clearTimeout(i),o.delete(w)})),w.dataset.transitionTimeout=""+i,y&&(p||(p=U()),K(p,r*2))}a=d}return h.prevId=()=>a?W(a):-1,h.getFrom=()=>a,h.setFrom=c=>a=c,h},G=new Map;function Tt(t){H(t);const e={isCancelled:!1,deferred:U()};return G.set(t,e),e.deferred.then(()=>{et(t)===e&&G.delete(t)}),e}function et(t){return G.get(t)}function H(t){const e=et(t);e&&(e.isCancelled=!0,e.deferred.resolve())}function nt(t,e,n){return n||(n=Tt(e)),z(()=>{n.isCancelled||(t()?nt(t,e,n):n.deferred.resolve())}),n.deferred}function Dt(t){z(()=>{t()&&Dt(t)})}function St(t){return!!(t!=null&&t.isConnected)}const j=250,Mt=600,st=1500,kt=500;var it=(t=>(t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Static=2]="Static",t))(it||{});function $t(t,e){return at({container:t,element:t,getElementPosition:()=>-t.scrollLeft,position:"start",axis:"x"})}function at(t){if(t.margin??(t.margin=0),t.maxDistance??(t.maxDistance=st),t.axis??(t.axis="y"),(!J.isAvailable("animations")||t.forceDuration===0)&&(t.forceDirection=2),t.forceDirection===2)return t.forceDuration=0,Y(t);const e=ht().then(()=>Y(t));return t.axis==="y"?K(e):e}function Y(t){const{element:e,container:n,getNormalSize:r,getElementPosition:s,transitionFunction:u,axis:f,margin:y,position:F,forceDirection:D,maxDistance:b,forceDuration:k}=t;if(!St(e))return H(n),Promise.resolve();const g=f==="y"?"top":"left",m=f==="y"?"bottom":"right",o=f==="y"?"height":"width",p=f==="y"?"scrollHeight":"scrollWidth",a=f==="y"?"scrollHeight":"offsetWidth",h=f==="y"?"scrollTop":"scrollLeft",c=e.getBoundingClientRect(),l=n.getBoundingClientRect?n.getBoundingClientRect():document.body.getBoundingClientRect(),v=c[g]-l[g],L=s?s({elementRect:c,containerRect:l,elementPosition:v}):v,d=e[a],P=r?r({rect:l}):l[o];let E=n[h];const C=n[p];let i;switch(F){case"start":i=L-y;break;case"end":i=c[m]-l[m]+y;break;case"nearest":case"center":if(d<P)i=L+d/2-P/2;else{if(t.fallbackToElementStartWhenCentering&&t.fallbackToElementStartWhenCentering!==e)return t.element=t.fallbackToElementStartWhenCentering,t.position="start",Y(t);i=L-y}break}if(Math.abs(i-(y||0))<1)return H(n),Promise.resolve();let w;if(f==="y"&&D===void 0&&(i>b?(w=E+=i-b,i=b):i<-b&&(w=E+=i+b,i=-b)),i<0){const S=-E;i=Math.max(i,S)}else if(i>0){const S=C-(E+P);i=Math.min(i,S)}const R=E+i,Q=Math.abs(i),N=k??j+Q/st*(Mt-j),rt=Date.now(),lt=u??(Q<kt?Ct:Pt),X=()=>N?Math.min((Date.now()-rt)/N,1):1,Z=()=>{w!==void 0&&(n[h]=w,w=void 0);const S=X(),ct=lt(S),dt=i*(1-ct);return n[h]=Math.round(R-dt),S<1};if(!N||!i)return H(n),Z(),Promise.resolve();if(t.startCallback){const S=C-Math.round(R+n[f==="y"?"offsetHeight":"offsetWidth"]);t.startCallback({scrollSize:C,scrollPosition:E,distanceToEnd:S,path:i,duration:N,containerRect:l,elementRect:c,getProgress:X})}return nt(Z,n)}function Pt(t){return 1-(1-t)**5}function Ct(t){return 1-(1-t)**3.5}function Rt(t,e){if(!t)return null;if(t.parentElement===e)return t;for(;t.parentElement;)if(t=t.parentElement,t.parentElement===e)return t;return null}function xt(t,e){const n=new Event(e,{bubbles:!0,cancelable:!0});t.dispatchEvent(n)}let I;document.addEventListener("mousedown",t=>{I=t.target,I!=null&&I.closest("[cancel-mouse-down]")&&t.preventDefault()});function At(t){if(t.isTrusted&&t.type==="click"&&t.target!==I)return!0}const $=vt?"mousedown":"click";function Ft(t,e,n={}){const r=n.listenerSetter?n.listenerSetter.add(t):t.addEventListener.bind(t),s=n.listenerSetter?n.listenerSetter.removeManual.bind(n.listenerSetter,t):t.removeEventListener.bind(t);if(n.touchMouseDown=!0,n.cancelMouseDown&&t.setAttribute("cancel-mouse-down",""),$==="click"&&!n.ignoreMove){const u=e;e=f=>{At(f)||u(f)}}return r($,e,n),()=>s($,e,n)}function zt(t){xt(t,$)}function It(t,e,n,r,s=200,u,f){const y=Et({content:e,type:t||e.dataset.animation==="tabs"?"tabs":"navigation",transitionTime:s,onTransitionEnd:r,listenerSetter:f});if(!t)return y;const F=new Proxy(y,{apply:(g,m,o)=>{const p=o[1]!==void 0?o[1]:!0;let a,h;o[0]instanceof HTMLElement?(a=W(o[0]),h=o[0]):(a=+o[0],h=t.querySelector(`[data-tab="${a}"]`)||t.children[a]),D(h,a,p)}}),D=async(g,m,o=!0)=>{const p=e.children[m];if(n){const l=n(m,p,o),v=l instanceof Promise?await l:l;if(v!==void 0&&!v)return}u&&u.scrollIntoViewNew({element:g.parentElement.children[m],position:"center",forceDirection:o?void 0:it.Static,forceDuration:s,axis:"x"}),J.isAvailable("animations")||(o=!1);const a=y.prevId();if(g.classList.contains("active")||m===a)return!1;const h=o?z:l=>l(),c=t.querySelector(k.toLowerCase()+".active");c&&h(()=>{c.classList.remove("active")}),b&&a!==-1&&o&&h(()=>{const l=g.querySelector("i"),v=g.parentElement.children[a].querySelector("i");v.classList.remove("animate"),l.classList.remove("animate");const L=v.parentElement.parentElement.offsetLeft-l.parentElement.parentElement.offsetLeft,d=v.clientWidth/l.clientWidth;l.style.transform=`translate3d(${L}px, 0, 0) scale3d(${d}, 1, 1)`,z(()=>{l.classList.add("animate"),l.style.transform="none"})}),h(()=>{g.classList.add("active")}),y(m,o)},b=!t.classList.contains("no-stripe"),k=t.firstElementChild.tagName;return Ft(t,g=>{let m=g.target;if(m=Rt(m,t),!m)return!1;let o;if(m.dataset.tab){if(o=+m.dataset.tab,o===-1)return!1}else o=W(m);D(m,o)},{listenerSetter:f}),F}class Wt{constructor(){this.pageId=-1,this.pagesDiv=document.getElementById("auth-pages"),this.scrollableDiv=this.pagesDiv.querySelector(".scrollable"),this.selectTab=It(null,this.scrollableDiv.querySelector(".tabs-container"),null,()=>{var e;(e=this.page)!=null&&e.onShown&&this.page.onShown()})}setPage(e){if(e.isAuthPage){this.pagesDiv.style.display="";const n=W(e.pageEl);if(this.pageId===n)return;this.selectTab(n),this.pageId=n,this.scrollableDiv&&at({container:this.scrollableDiv,element:this.scrollableDiv.firstElementChild,position:"start"})}else this.pagesDiv.style.display="none",e.pageEl.style.display="",this.pageId=-1;this.page=e}}const ot=new Wt;ut.pagesManager=ot;class Ot{constructor(e,n,r,s,u){this.isAuthPage=n,this.onFirstMount=r,this.onMount=s,this.onShown=u,this.installed=!1,this.pageEl=document.body.querySelector("."+e)}async mount(...e){if(this.onMount){const n=this.onMount(...e);n instanceof Promise&&await n}if(!this.installed){if(this.onFirstMount)try{const n=this.onFirstMount(...e);n instanceof Promise&&await n}catch(n){console.error("PAGE MOUNT ERROR:",n)}this.installed=!0}ot.setPage(this)}}export{St as A,$ as B,Ht as F,K as G,H,Rt as N,It as O,At as R,Et as S,zt as U,$t as W,Ft as _,W as a,qt as b,Dt as c,Bt as d,at as e,it as i,xt as k,nt as s,Ot as z};
