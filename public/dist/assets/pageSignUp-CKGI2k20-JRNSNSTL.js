const __vite__fileDeps=["assets/pageIm-B4GzUrmM-D9QjBKom.js","assets/index-p16BOqnp.js","assets/index-B8jL9cEs.css","assets/page-VE9OcG0U-aQMl6CMd.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{S as l,U as w,V as y,_ as k,s as E,G as M}from"./index-p16BOqnp.js";import{n as P}from"./loginPage-fFfFEVsO-BAL91Mrr.js";import{z as S}from"./page-VE9OcG0U-aQMl6CMd.js";import{D as g,M as _,a as D}from"./wrapEmojiText-DJXpRYaz-DsSuZO2C.js";import{N,v as U}from"./avatar-BygOGLJ2-VrvUKNFE.js";import{j as x,H as j}from"./button-BD6I5F21-BCIxP22E.js";import{i as z}from"./putPreloader-BTYVD0HY-Cj27QpTZ.js";import"./scrollable-DoUmbSw--CLoL6L-W.js";const A=["./pageIm-B4GzUrmM.js","./index-Bk6w0QSK.js","./index-jdz_mo9Z.css","./page-VE9OcG0U.js"],G=e=>e.map(i=>A[i]);let c=null;const I=async()=>{const e=new P({className:"page-signUp",withInputWrapper:!0,titleLangKey:"YourName",subtitleLangKey:"Login.Register.Subtitle"});e.imageDiv.classList.add("avatar-edit"),e.title.classList.add("fullName");const i=document.createElement("canvas");i.id="canvas-avatar",i.className="avatar-edit-canvas";const f=x("cameraadd","avatar-edit-icon");e.imageDiv.append(i,f);let u;e.imageDiv.addEventListener("click",()=>{N.createPopup(U).open(i,a=>{u=a})});const h=a=>{const n=t.value||"",r=o.value||"",m=n||r?(n+" "+r).trim():"";m?_(e.title,D(m)):_(e.title,M("YourName"))},b=()=>new Promise((a,n)=>{if(!u)return a();u().then(r=>{l.managers.appProfileManager.uploadProfilePhoto(r).then(a,n)},n)}),t=new g({label:"FirstName",maxLength:70}),o=new g({label:"LastName",maxLength:64}),d=j("btn-primary btn-color-primary"),p=new w.IntlElement({key:"StartMessaging"});return d.append(p.element),e.inputWrapper.append(t.container,o.container,d),t.input.addEventListener("input",h),o.input.addEventListener("input",h),d.addEventListener("click",function(a){if(t.input.classList.contains("error")||o.input.classList.contains("error"))return!1;if(!t.value.length)return t.input.classList.add("error"),!1;this.disabled=!0;const n=t.value.trim(),r=o.value.trim(),m={phone_number:c.phone_number,phone_code_hash:c.phone_code_hash,first_name:n,last_name:r};p.update({key:"PleaseWait"});const v=z(this);l.managers.apiManager.invokeApi("auth.signUp",m).then(async s=>{switch(s._){case"auth.authorization":await l.managers.apiManager.setUser(s.user),b().finally(()=>{y(()=>k(()=>import("./pageIm-B4GzUrmM-D9QjBKom.js"),__vite__mapDeps([0,1,2,3])),G([0,1,2,3]),import.meta.url).then(L=>{L.default.mount()})});break;default:p.update({key:s._}),this.removeAttribute("disabled"),v.remove();break}}).catch(s=>{switch(this.removeAttribute("disabled"),v.remove(),s.type){default:p.update({key:s.type});break}})}),E(),new Promise(a=>{window.requestAnimationFrame(a)})},T=new S("page-signUp",!0,I,e=>{c=e,l.managers.appStateManager.pushToState("authState",{_:"authStateSignUp",authCode:e})});export{T as default};
