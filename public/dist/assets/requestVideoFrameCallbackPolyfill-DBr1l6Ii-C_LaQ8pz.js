!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(t){const o=this.getVideoPlaybackQuality(),d=this.mozPresentedFrames||this.mozPaintedFrames||o.totalVideoFrames-o.droppedVideoFrames,m=(l,e)=>{const r=this.getVideoPlaybackQuality(),s=this.mozPresentedFrames||this.mozPaintedFrames||r.totalVideoFrames-r.droppedVideoFrames;if(s>d){const a=this.mozFrameDelay||r.totalFrameDelay-o.totalFrameDelay||0,n=e-l;t(e,{presentationTime:e+a*1e3,expectedDisplayTime:e+n,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+n/1e3,presentedFrames:s,processingDuration:a}),delete this._rvfcpolyfillmap[i]}else this._rvfcpolyfillmap[i]=requestAnimationFrame(a=>m(e,a))},i=Date.now(),p=performance.now();return this._rvfcpolyfillmap[i]=requestAnimationFrame(l=>m(p,l)),i},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(t){cancelAnimationFrame(this._rvfcpolyfillmap[t]),delete this._rvfcpolyfillmap[t]});
