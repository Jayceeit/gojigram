const __vite__fileDeps=["assets/pageIm-B4GzUrmM-D9QjBKom.js","assets/index-p16BOqnp.js","assets/index-B8jL9cEs.css","assets/page-VE9OcG0U-aQMl6CMd.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{S as d,U as f,i as v,z as b,V as y,_ as L}from"./index-p16BOqnp.js";import{i as S}from"./putPreloader-BTYVD0HY-Cj27QpTZ.js";import{z as k,_ as z}from"./page-VE9OcG0U-aQMl6CMd.js";import{H as M}from"./button-BD6I5F21-BCIxP22E.js";import{u as P,w as I,b as D}from"./htmlToSpan-CWT7jaQY-DLinxisR.js";import{n as E}from"./loginPage-fFfFEVsO-BAL91Mrr.js";import{M as V,a as x,z as A}from"./wrapEmojiText-DJXpRYaz-DsSuZO2C.js";const j=["./pageIm-B4GzUrmM.js","./index-Bk6w0QSK.js","./index-jdz_mo9Z.css","./page-VE9OcG0U.js"],K=n=>n.map(e=>j[e]);let a;const N=()=>{const n=new E({className:"page-password",withInputWrapper:!0,titleLangKey:"Login.Password.Title",subtitleLangKey:"Login.Password.Subtitle"}),e=M("btn-primary btn-color-primary"),s=new f.IntlElement({key:"Login.Next"});e.append(s.element);const t=new P({label:"LoginPassword",name:"password"});a=t.input,n.inputWrapper.append(t.container,e);let p;const m=()=>(p||(p=window.setInterval(m,1e4)),d.managers.passwordManager.getState().then(r=>{o=r,o.hint?V(t.label,D(x(o.hint))):t.setLabel()}));let o;const u=r=>{if(r&&b(r),!a.value.length){a.classList.add("error");return}const g=A([a,e],!0),c=a.value;s.update({key:"PleaseWait"});const _=S(e);t.setValueSilently(""+Math.random()),t.setValueSilently(c),d.managers.passwordManager.check(c,o).then(l=>{switch(l._){case"auth.authorization":clearInterval(p),y(()=>L(()=>import("./pageIm-B4GzUrmM-D9QjBKom.js"),__vite__mapDeps([0,1,2,3])),K([0,1,2,3]),import.meta.url).then(h=>{h.default.mount()}),i&&i.remove();break;default:e.removeAttribute("disabled"),s.update({key:l._}),_.remove();break}}).catch(l=>{switch(g(),t.input.classList.add("error"),l.type){default:s.update({key:"PASSWORD_HASH_INVALID"}),a.select();break}_.remove(),m()})};z(e,u),a.addEventListener("keypress",function(r){if(this.classList.remove("error"),s.update({key:"Login.Next"}),r.key==="Enter")return u()});const w=v.isMobile?100:166,i=new I(t,w);return n.imageDiv.append(i.container),Promise.all([i.load(),m()])},G=new k("page-password",!0,N,null,()=>{a.focus(),d.managers.appStateManager.pushToState("authState",{_:"authStatePassword"})});export{G as default};
